goog.require('Blockly.Blocks');goog.require('Blockly');'use strict';goog.provide('Blockly.Msg.zh.hans');goog.require('Blockly.Msg');Blockly.Msg["ADD_COMMENT"]="添加注释";Blockly.Msg["CANNOT_DELETE_VARIABLE_PROCEDURE"]="不能删除变量“%1”，因为它是功能“%2”定义的一部分";Blockly.Msg["CHANGE_VALUE_TITLE"]="更改值：";Blockly.Msg["CLEAN_UP"]="整理块";Blockly.Msg["COLLAPSE_ALL"]="折叠块";Blockly.Msg["COLLAPSE_BLOCK"]="折叠块";Blockly.Msg["COLOUR_BLEND_COLOUR1"]="颜色1";Blockly.Msg["COLOUR_BLEND_COLOUR2"]="颜色2";Blockly.Msg["COLOUR_BLEND_HELPURL"]="http://meyerweb.com/eric/tools/color-blend/";Blockly.Msg["COLOUR_BLEND_RATIO"]="比例";Blockly.Msg["COLOUR_BLEND_TITLE"]="混合";Blockly.Msg["COLOUR_BLEND_TOOLTIP"]="用一个给定的比率(0.0-1.0)混合两种颜色。";Blockly.Msg["COLOUR_PICKER_HELPURL"]="https://zh.wikipedia.org/wiki/颜色";Blockly.Msg["COLOUR_PICKER_TOOLTIP"]="从调色板中选择一种颜色。";Blockly.Msg["COLOUR_RANDOM_HELPURL"]="http://randomcolour.com";Blockly.Msg["COLOUR_RANDOM_TITLE"]="随机颜色";Blockly.Msg["COLOUR_RANDOM_TOOLTIP"]="随机选择一种颜色。";Blockly.Msg["COLOUR_RGB_BLUE"]="蓝色";Blockly.Msg["COLOUR_RGB_GREEN"]="绿色";Blockly.Msg["COLOUR_RGB_HELPURL"]="http://www.december.com/html/spec/colorper.html";Blockly.Msg["COLOUR_RGB_RED"]="红色";Blockly.Msg["COLOUR_RGB_TITLE"]="颜色";Blockly.Msg["COLOUR_RGB_TOOLTIP"]="通过指定红色、绿色和蓝色的量创建一种颜色。所有的值必须在0和100之间。";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_HELPURL"]="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK"]="中断循环";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE"]="继续下一次循环";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK"]="中断包含它的循环。";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE"]="跳过这个循环的剩余部分，并继续下一次迭代。";Blockly.Msg["CONTROLS_FLOW_STATEMENTS_WARNING"]="警告：此块仅可用于在一个循环内。";Blockly.Msg["CONTROLS_FOREACH_HELPURL"]="https://github.com/google/blockly/wiki/Loops#for-each";Blockly.Msg["CONTROLS_FOREACH_TITLE"]="为每个项目 %1 在列表中 %2";Blockly.Msg["CONTROLS_FOREACH_TOOLTIP"]="遍历每个列表中的项目，将变量“%1”设定到该项中，然后执行某些语句。";Blockly.Msg["CONTROLS_FOR_HELPURL"]="https://github.com/google/blockly/wiki/Loops#count-with";Blockly.Msg["CONTROLS_FOR_TITLE"]="使用 %1 从范围 %2 到 %3 每隔 %4";Blockly.Msg["CONTROLS_FOR_TOOLTIP"]="从起始数到结尾数中取出变量“%1”的值，按指定的时间间隔，执行指定的块。";Blockly.Msg["CONTROLS_IF_ELSEIF_TOOLTIP"]="在if语句块中增加一个条件。";Blockly.Msg["CONTROLS_IF_ELSE_TOOLTIP"]="添加一个最终的，包括所有情况的节到if块中。";Blockly.Msg["CONTROLS_IF_HELPURL"]="https://github.com/google/blockly/wiki/IfElse";Blockly.Msg["CONTROLS_IF_IF_TOOLTIP"]="增加、删除或重新排列各节来重新配置“if”块。";Blockly.Msg["CONTROLS_IF_MSG_ELSE"]="否则";Blockly.Msg["CONTROLS_IF_MSG_ELSEIF"]="否则如果";Blockly.Msg["CONTROLS_IF_MSG_IF"]="如果";Blockly.Msg["CONTROLS_IF_TOOLTIP_1"]="如果值为真，执行一些语句。";Blockly.Msg["CONTROLS_IF_TOOLTIP_2"]="如果值为真，则执行第一块语句。否则，则执行第二块语句。";Blockly.Msg["CONTROLS_IF_TOOLTIP_3"]="如果第一个值为真，则执行第一块的语句。否则，如果第二个值为真，则执行第二块的语句。";Blockly.Msg["CONTROLS_IF_TOOLTIP_4"]="如果第一个值为真，则执行第一块对语句。否则，如果第二个值为真，则执行语句的第二块。如果没有值为真，则执行最后一块的语句。";Blockly.Msg["CONTROLS_REPEAT_HELPURL"]="https://zh.wikipedia.org/wiki/For循环";Blockly.Msg["CONTROLS_REPEAT_INPUT_DO"]="执行";Blockly.Msg["CONTROLS_REPEAT_TITLE"]="重复 %1 次";Blockly.Msg["CONTROLS_REPEAT_TOOLTIP"]="多次执行一些语句。";Blockly.Msg["CONTROLS_WHILEUNTIL_HELPURL"]="https://github.com/google/blockly/wiki/Loops#repeat";Blockly.Msg["CONTROLS_WHILEUNTIL_OPERATOR_UNTIL"]="重复直到";Blockly.Msg["CONTROLS_WHILEUNTIL_OPERATOR_WHILE"]="重复当";Blockly.Msg["CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL"]="只要值为假，执行一些语句。";Blockly.Msg["CONTROLS_WHILEUNTIL_TOOLTIP_WHILE"]="只要值为真，执行一些语句。";Blockly.Msg["DELETE_ALL_BLOCKS"]="删除所有%1块吗？";Blockly.Msg["DELETE_BLOCK"]="删除块";Blockly.Msg["DELETE_VARIABLE"]="删除“%1”变量";Blockly.Msg["DELETE_VARIABLE_CONFIRMATION"]="删除“%2”变量的%1用途么？";Blockly.Msg["DELETE_X_BLOCKS"]="删除 %1 块";Blockly.Msg["DISABLE_BLOCK"]="禁用块";Blockly.Msg["DUPLICATE_BLOCK"]="复制";Blockly.Msg["ENABLE_BLOCK"]="启用块";Blockly.Msg["EXPAND_ALL"]="展开块";Blockly.Msg["EXPAND_BLOCK"]="展开块";Blockly.Msg["EXTERNAL_INPUTS"]="外部输入";Blockly.Msg["HELP"]="帮助";Blockly.Msg["INLINE_INPUTS"]="单行输入";Blockly.Msg["IOS_CANCEL"]="取消";Blockly.Msg["IOS_ERROR"]="错误";Blockly.Msg["IOS_OK"]="确定";Blockly.Msg["IOS_PROCEDURES_ADD_INPUT"]="+添加输入";Blockly.Msg["IOS_PROCEDURES_ALLOW_STATEMENTS"]="允许声明";Blockly.Msg["IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR"]="此功能有重复输入内容。";Blockly.Msg["IOS_PROCEDURES_INPUTS"]="输入";Blockly.Msg["IOS_VARIABLES_ADD_BUTTON"]="添加";Blockly.Msg["IOS_VARIABLES_ADD_VARIABLE"]="+添加变量";Blockly.Msg["IOS_VARIABLES_DELETE_BUTTON"]="删除";Blockly.Msg["IOS_VARIABLES_EMPTY_NAME_ERROR"]="您不能使用空变量名称。";Blockly.Msg["IOS_VARIABLES_RENAME_BUTTON"]="重命名";Blockly.Msg["IOS_VARIABLES_VARIABLE_NAME"]="变量名称";Blockly.Msg["LISTS_CREATE_EMPTY_HELPURL"]="https://github.com/google/blockly/wiki/Lists#create-empty-list";Blockly.Msg["LISTS_CREATE_EMPTY_TITLE"]="创建空列表";Blockly.Msg["LISTS_CREATE_EMPTY_TOOLTIP"]="返回一个列表，长度为 0，不包含任何数据记录";Blockly.Msg["LISTS_CREATE_WITH_CONTAINER_TITLE_ADD"]="列表";Blockly.Msg["LISTS_CREATE_WITH_CONTAINER_TOOLTIP"]="增加、删除或重新排列各部分以此重新配置这个列表块。";Blockly.Msg["LISTS_CREATE_WITH_HELPURL"]="https://github.com/google/blockly/wiki/Lists#create-list-with";Blockly.Msg["LISTS_CREATE_WITH_INPUT_WITH"]="建立列表使用";Blockly.Msg["LISTS_CREATE_WITH_ITEM_TOOLTIP"]="将一个项添加到列表中。";Blockly.Msg["LISTS_CREATE_WITH_TOOLTIP"]="建立一个具有任意数量项目的列表。";Blockly.Msg["LISTS_GET_INDEX_FIRST"]="第一";Blockly.Msg["LISTS_GET_INDEX_FROM_END"]="倒数第#";Blockly.Msg["LISTS_GET_INDEX_FROM_START"]="#";Blockly.Msg["LISTS_GET_INDEX_GET"]="取得";Blockly.Msg["LISTS_GET_INDEX_GET_REMOVE"]="取出并移除";Blockly.Msg["LISTS_GET_INDEX_LAST"]="最后";Blockly.Msg["LISTS_GET_INDEX_RANDOM"]="随机";Blockly.Msg["LISTS_GET_INDEX_REMOVE"]="移除";Blockly.Msg["LISTS_GET_INDEX_TAIL"]="";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_FIRST"]="返回列表中的第一个项目。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_FROM"]="返回在列表中的指定位置的项。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_LAST"]="返回列表中的最后一项。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_RANDOM"]="随机返回列表中的一个项目。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST"]="移除并返回列表中的第一个项目。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM"]="移除并返回列表中的指定位置的项。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST"]="移除并返回列表中的最后一个项目。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM"]="移除并返回列表中的一个随机项目中。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST"]="移除列表中的第一项";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM"]="移除在列表中的指定位置的项。";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST"]="移除列表中的最后一项";Blockly.Msg["LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM"]="删除列表中的一个随机的项。";Blockly.Msg["LISTS_GET_SUBLIST_END_FROM_END"]="到倒数第#";Blockly.Msg["LISTS_GET_SUBLIST_END_FROM_START"]="到#";Blockly.Msg["LISTS_GET_SUBLIST_END_LAST"]="到最后";Blockly.Msg["LISTS_GET_SUBLIST_HELPURL"]="https://github.com/google/blockly/wiki/Lists#getting-a-sublist";Blockly.Msg["LISTS_GET_SUBLIST_START_FIRST"]="从头获得子列表";Blockly.Msg["LISTS_GET_SUBLIST_START_FROM_END"]="从倒数#取得子列表";Blockly.Msg["LISTS_GET_SUBLIST_START_FROM_START"]="从#取得子列表";Blockly.Msg["LISTS_GET_SUBLIST_TAIL"]="";Blockly.Msg["LISTS_GET_SUBLIST_TOOLTIP"]="复制列表中指定的部分。";Blockly.Msg["LISTS_INDEX_FROM_END_TOOLTIP"]="%1是最后一项。";Blockly.Msg["LISTS_INDEX_FROM_START_TOOLTIP"]="%1是第一个项目。";Blockly.Msg["LISTS_INDEX_OF_FIRST"]="找出第一个项出现";Blockly.Msg["LISTS_INDEX_OF_HELPURL"]="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list";Blockly.Msg["LISTS_INDEX_OF_LAST"]="找出最后一个项出现";Blockly.Msg["LISTS_INDEX_OF_TOOLTIP"]="返回在列表中的第一/最后一个匹配项的索引值。如果找不到项目则返回%1。";Blockly.Msg["LISTS_INLIST"]="在列表中";Blockly.Msg["LISTS_ISEMPTY_HELPURL"]="https://github.com/google/blockly/wiki/Lists#is-empty";Blockly.Msg["LISTS_ISEMPTY_TITLE"]="%1是空的";Blockly.Msg["LISTS_ISEMPTY_TOOLTIP"]="如果改列表为空，则返回真。";Blockly.Msg["LISTS_LENGTH_HELPURL"]="https://github.com/google/blockly/wiki/Lists#length-of";Blockly.Msg["LISTS_LENGTH_TITLE"]="%1的长度";Blockly.Msg["LISTS_LENGTH_TOOLTIP"]="返回列表的长度。";Blockly.Msg["LISTS_REPEAT_HELPURL"]="https://github.com/google/blockly/wiki/Lists#create-list-with";Blockly.Msg["LISTS_REPEAT_TITLE"]="建立列表使用项 %1 重复 %2 次";Blockly.Msg["LISTS_REPEAT_TOOLTIP"]="建立包含指定重复次数的值的列表。";Blockly.Msg["LISTS_REVERSE_HELPURL"]="https://github.com/google/blockly/wiki/Lists#reversing-a-list";Blockly.Msg["LISTS_REVERSE_MESSAGE0"]="倒转%1";Blockly.Msg["LISTS_REVERSE_TOOLTIP"]="倒转一个列表的拷贝。";Blockly.Msg["LISTS_SET_INDEX_HELPURL"]="https://github.com/google/blockly/wiki/Lists#in-list--set";Blockly.Msg["LISTS_SET_INDEX_INPUT_TO"]="为";Blockly.Msg["LISTS_SET_INDEX_INSERT"]="插入在";Blockly.Msg["LISTS_SET_INDEX_SET"]="设置";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST"]="在列表的起始处添加该项。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_INSERT_FROM"]="插入在列表中指定位置的项。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_INSERT_LAST"]="将该项追加到列表的末尾。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM"]="在列表中随机插入项。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_SET_FIRST"]="设置列表中的第一个项目。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_SET_FROM"]="设置在列表中指定位置的项。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_SET_LAST"]="设置列表中的最后一项。";Blockly.Msg["LISTS_SET_INDEX_TOOLTIP_SET_RANDOM"]="设置列表中一个随机的项目。";Blockly.Msg["LISTS_SORT_HELPURL"]="https://github.com/google/blockly/wiki/Lists#sorting-a-list";Blockly.Msg["LISTS_SORT_ORDER_ASCENDING"]="升序";Blockly.Msg["LISTS_SORT_ORDER_DESCENDING"]="降序";Blockly.Msg["LISTS_SORT_TITLE"]="排序%1 %2 %3";Blockly.Msg["LISTS_SORT_TOOLTIP"]="排序一个列表的拷贝。";Blockly.Msg["LISTS_SORT_TYPE_IGNORECASE"]="按字母排序，忽略大小写";Blockly.Msg["LISTS_SORT_TYPE_NUMERIC"]="按数字排序";Blockly.Msg["LISTS_SORT_TYPE_TEXT"]="按字母排序";Blockly.Msg["LISTS_SPLIT_HELPURL"]="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists";Blockly.Msg["LISTS_SPLIT_LIST_FROM_TEXT"]="从文本制作列表";Blockly.Msg["LISTS_SPLIT_TEXT_FROM_LIST"]="从列表拆出文本";Blockly.Msg["LISTS_SPLIT_TOOLTIP_JOIN"]="加入文本列表至一个文本，由分隔符分隔。";Blockly.Msg["LISTS_SPLIT_TOOLTIP_SPLIT"]="拆分文本到文本列表，按每个分隔符拆分。";Blockly.Msg["LISTS_SPLIT_WITH_DELIMITER"]="用分隔符";Blockly.Msg["LOGIC_BOOLEAN_FALSE"]="假";Blockly.Msg["LOGIC_BOOLEAN_HELPURL"]="https://github.com/google/blockly/wiki/Logic#values";Blockly.Msg["LOGIC_BOOLEAN_TOOLTIP"]="返回真或假。";Blockly.Msg["LOGIC_BOOLEAN_TRUE"]="真";Blockly.Msg["LOGIC_COMPARE_HELPURL"]="https://zh.wikipedia.org/wiki/不等";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_EQ"]="如果两个输入结果相等，则返回真。";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_GT"]="如果第一个输入结果比第二个大，则返回真。";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_GTE"]="如果第一个输入结果大于或等于第二个输入结果，则返回真。";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_LT"]="如果第一个输入结果比第二个小，则返回真。";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_LTE"]="如果第一个输入结果小于或等于第二个输入结果，则返回真。";Blockly.Msg["LOGIC_COMPARE_TOOLTIP_NEQ"]="如果两个输入结果不相等，则返回真。";Blockly.Msg["LOGIC_NEGATE_HELPURL"]="https://github.com/google/blockly/wiki/Logic#not";Blockly.Msg["LOGIC_NEGATE_TITLE"]="非%1";Blockly.Msg["LOGIC_NEGATE_TOOLTIP"]="如果输入结果为假，则返回真；如果输入结果为真，则返回假。";Blockly.Msg["LOGIC_NULL"]="空";Blockly.Msg["LOGIC_NULL_HELPURL"]="https://en.wikipedia.org/wiki/Nullable_type";Blockly.Msg["LOGIC_NULL_TOOLTIP"]="返回空值。";Blockly.Msg["LOGIC_OPERATION_AND"]="和";Blockly.Msg["LOGIC_OPERATION_HELPURL"]="https://github.com/google/blockly/wiki/Logic#logical-operations";Blockly.Msg["LOGIC_OPERATION_OR"]="或";Blockly.Msg["LOGIC_OPERATION_TOOLTIP_AND"]="如果两个输入结果都为真，则返回真。";Blockly.Msg["LOGIC_OPERATION_TOOLTIP_OR"]="如果至少有一个输入结果为真，则返回真。";Blockly.Msg["LOGIC_TERNARY_CONDITION"]="测试";Blockly.Msg["LOGIC_TERNARY_HELPURL"]="https://zh.wikipedia.org/wiki/条件运算符";Blockly.Msg["LOGIC_TERNARY_IF_FALSE"]="如果为假";Blockly.Msg["LOGIC_TERNARY_IF_TRUE"]="如果为真";Blockly.Msg["LOGIC_TERNARY_TOOLTIP"]="检查“test”中的条件。如果条件为真，则返回“if true”的值，否则，则返回“if false”的值。";Blockly.Msg["MATH_ADDITION_SYMBOL"]="+";Blockly.Msg["MATH_ARITHMETIC_HELPURL"]="https://zh.wikipedia.org/wiki/算术";Blockly.Msg["MATH_ARITHMETIC_TOOLTIP_ADD"]="返回两个数字的和。";Blockly.Msg["MATH_ARITHMETIC_TOOLTIP_DIVIDE"]="返回两个数字的商。";Blockly.Msg["MATH_ARITHMETIC_TOOLTIP_MINUS"]="返回两个数字的区别。";Blockly.Msg["MATH_ARITHMETIC_TOOLTIP_MULTIPLY"]="返回两个数字的乘积。";Blockly.Msg["MATH_ARITHMETIC_TOOLTIP_POWER"]="返回第一个数的第二个数次幂。";Blockly.Msg["MATH_CHANGE_HELPURL"]="https://zh.wikipedia.org/wiki/加法";Blockly.Msg["MATH_CHANGE_TITLE"]="更改 %1 从 %2";Blockly.Msg["MATH_CHANGE_TOOLTIP"]="将一个数添加到变量“%1”。";Blockly.Msg["MATH_CONSTANT_HELPURL"]="https://zh.wikipedia.org/wiki/数学常数";Blockly.Msg["MATH_CONSTANT_TOOLTIP"]="返回一个常见常量：π (3.141…)、e (2.718…)、φ (1.618…)、平方根 (1.414…)、开平方根 (0.707…)或∞ (infinity)。";Blockly.Msg["MATH_CONSTRAIN_HELPURL"]="https://en.wikipedia.org/wiki/Clamping_(graphics)";Blockly.Msg["MATH_CONSTRAIN_TITLE"]="限制数字 %1 介于 (低) %2 到 (高) %3";Blockly.Msg["MATH_CONSTRAIN_TOOLTIP"]="限制数字介于两个指定的数字之间";Blockly.Msg["MATH_DIVISION_SYMBOL"]="÷";Blockly.Msg["MATH_IS_DIVISIBLE_BY"]="可被整除";Blockly.Msg["MATH_IS_EVEN"]="是偶数";Blockly.Msg["MATH_IS_NEGATIVE"]="为负";Blockly.Msg["MATH_IS_ODD"]="是奇数";Blockly.Msg["MATH_IS_POSITIVE"]="为正";Blockly.Msg["MATH_IS_PRIME"]="是质数";Blockly.Msg["MATH_IS_TOOLTIP"]="如果数字是偶数、奇数、非负整数、正数、负数或如果它可被某数字整除，则返回真或假。";Blockly.Msg["MATH_IS_WHOLE"]="为整数";Blockly.Msg["MATH_MODULO_HELPURL"]="https://zh.wikipedia.org/wiki/模除";Blockly.Msg["MATH_MODULO_TITLE"]="取余数自 %1 ÷ %2";Blockly.Msg["MATH_MODULO_TOOLTIP"]="返回这两个数字相除后的余数。";Blockly.Msg["MATH_MULTIPLICATION_SYMBOL"]="×";Blockly.Msg["MATH_NUMBER_HELPURL"]="https://zh.wikipedia.org/wiki/数";Blockly.Msg["MATH_NUMBER_TOOLTIP"]="一个数字。";Blockly.Msg["MATH_ONLIST_HELPURL"]="";Blockly.Msg["MATH_ONLIST_OPERATOR_AVERAGE"]="列表中的平均数";Blockly.Msg["MATH_ONLIST_OPERATOR_MAX"]="列表中的最大值";Blockly.Msg["MATH_ONLIST_OPERATOR_MEDIAN"]="列表中位数";Blockly.Msg["MATH_ONLIST_OPERATOR_MIN"]="列表中的最小值";Blockly.Msg["MATH_ONLIST_OPERATOR_MODE"]="列表模式";Blockly.Msg["MATH_ONLIST_OPERATOR_RANDOM"]="列表的随机项";Blockly.Msg["MATH_ONLIST_OPERATOR_STD_DEV"]="列表中的标准差";Blockly.Msg["MATH_ONLIST_OPERATOR_SUM"]="列表中的数的总和";Blockly.Msg["MATH_ONLIST_TOOLTIP_AVERAGE"]="返回列表中的数值的平均值。";Blockly.Msg["MATH_ONLIST_TOOLTIP_MAX"]="返回列表中最大数。";Blockly.Msg["MATH_ONLIST_TOOLTIP_MEDIAN"]="返回列表中的中位数。";Blockly.Msg["MATH_ONLIST_TOOLTIP_MIN"]="返回列表中最小数。";Blockly.Msg["MATH_ONLIST_TOOLTIP_MODE"]="返回列表中的最常见的项的列表。";Blockly.Msg["MATH_ONLIST_TOOLTIP_RANDOM"]="从列表中返回一个随机的元素。";Blockly.Msg["MATH_ONLIST_TOOLTIP_STD_DEV"]="返回列表的标准偏差。";Blockly.Msg["MATH_ONLIST_TOOLTIP_SUM"]="返回列表中的所有数字的和。";Blockly.Msg["MATH_POWER_SYMBOL"]="^";Blockly.Msg["MATH_RANDOM_FLOAT_HELPURL"]="https://zh.wikipedia.org/wiki/随机数生成器";Blockly.Msg["MATH_RANDOM_FLOAT_TITLE_RANDOM"]="随机分数";Blockly.Msg["MATH_RANDOM_FLOAT_TOOLTIP"]="返回介于（包含）0.0到1.0之间的随机数。";Blockly.Msg["MATH_RANDOM_INT_HELPURL"]="https://zh.wikipedia.org/wiki/随机数生成器";Blockly.Msg["MATH_RANDOM_INT_TITLE"]="从 %1 到 %2 之间的随机整数";Blockly.Msg["MATH_RANDOM_INT_TOOLTIP"]="返回两个指定的范围（含）之间的随机整数。";Blockly.Msg["MATH_ROUND_HELPURL"]="https://zh.wikipedia.org/wiki/数值修约";Blockly.Msg["MATH_ROUND_OPERATOR_ROUND"]="四舍五入";Blockly.Msg["MATH_ROUND_OPERATOR_ROUNDDOWN"]="退位";Blockly.Msg["MATH_ROUND_OPERATOR_ROUNDUP"]="进一";Blockly.Msg["MATH_ROUND_TOOLTIP"]="数字进行相应舍入。";Blockly.Msg["MATH_SINGLE_HELPURL"]="https://zh.wikipedia.org/wiki/平方根";Blockly.Msg["MATH_SINGLE_OP_ABSOLUTE"]="绝对";Blockly.Msg["MATH_SINGLE_OP_ROOT"]="平方根";Blockly.Msg["MATH_SINGLE_TOOLTIP_ABS"]="返回一个数的绝对值。";Blockly.Msg["MATH_SINGLE_TOOLTIP_EXP"]="返回一个数的e次幂。";Blockly.Msg["MATH_SINGLE_TOOLTIP_LN"]="返回一个数的自然对数。";Blockly.Msg["MATH_SINGLE_TOOLTIP_LOG10"]="返回一个数的对数。";Blockly.Msg["MATH_SINGLE_TOOLTIP_NEG"]="返回一个数的逻辑非。";Blockly.Msg["MATH_SINGLE_TOOLTIP_POW10"]="返回一个数的10次幂。";Blockly.Msg["MATH_SINGLE_TOOLTIP_ROOT"]="返回一个数的平方根。";Blockly.Msg["MATH_SUBTRACTION_SYMBOL"]="-";Blockly.Msg["MATH_TRIG_ACOS"]="acos";Blockly.Msg["MATH_TRIG_ASIN"]="asin";Blockly.Msg["MATH_TRIG_ATAN"]="atan";Blockly.Msg["MATH_TRIG_COS"]="cos";Blockly.Msg["MATH_TRIG_HELPURL"]="https://zh.wikipedia.org/wiki/三角函数";Blockly.Msg["MATH_TRIG_SIN"]="sin";Blockly.Msg["MATH_TRIG_TAN"]="tan";Blockly.Msg["MATH_TRIG_TOOLTIP_ACOS"]="返回一个数的反余弦值。";Blockly.Msg["MATH_TRIG_TOOLTIP_ASIN"]="返回一个数的反正弦值。";Blockly.Msg["MATH_TRIG_TOOLTIP_ATAN"]="返回指定角度的反正切值。";Blockly.Msg["MATH_TRIG_TOOLTIP_COS"]="返回指定角度的余弦值(非弧度）。";Blockly.Msg["MATH_TRIG_TOOLTIP_SIN"]="返回指定角度的正弦值(非弧度）。";Blockly.Msg["MATH_TRIG_TOOLTIP_TAN"]="返回指定角度的正切值(非弧度）。";Blockly.Msg["NEW_VARIABLE"]="创建变量...";Blockly.Msg["NEW_VARIABLE_TITLE"]="新变量的名称：";Blockly.Msg["ORDINAL_NUMBER_SUFFIX"]="";Blockly.Msg["PROCEDURES_ALLOW_STATEMENTS"]="允许声明";Blockly.Msg["PROCEDURES_BEFORE_PARAMS"]="与：";Blockly.Msg["PROCEDURES_CALLNORETURN_HELPURL"]="https://zh.wikipedia.org/wiki/子程序";Blockly.Msg["PROCEDURES_CALLNORETURN_TOOLTIP"]="运行用户定义的函数“%1”。";Blockly.Msg["PROCEDURES_CALLRETURN_HELPURL"]="https://zh.wikipedia.org/wiki/子程序";Blockly.Msg["PROCEDURES_CALLRETURN_TOOLTIP"]="运行用户定义的函数“%1”，并使用它的输出值。";Blockly.Msg["PROCEDURES_CALL_BEFORE_PARAMS"]="与：";Blockly.Msg["PROCEDURES_CREATE_DO"]="创建“%1”";Blockly.Msg["PROCEDURES_DEFNORETURN_COMMENT"]="描述该功能...";Blockly.Msg["PROCEDURES_DEFNORETURN_DO"]="";Blockly.Msg["PROCEDURES_DEFNORETURN_HELPURL"]="https://zh.wikipedia.org/wiki/子程序";Blockly.Msg["PROCEDURES_DEFNORETURN_PROCEDURE"]="做点什么";Blockly.Msg["PROCEDURES_DEFNORETURN_TITLE"]="至";Blockly.Msg["PROCEDURES_DEFNORETURN_TOOLTIP"]="创建一个不带输出值的函数。";Blockly.Msg["PROCEDURES_DEFRETURN_HELPURL"]="https://zh.wikipedia.org/wiki/子程序";Blockly.Msg["PROCEDURES_DEFRETURN_RETURN"]="返回";Blockly.Msg["PROCEDURES_DEFRETURN_TOOLTIP"]="创建一个有输出值的函数。";Blockly.Msg["PROCEDURES_DEF_DUPLICATE_WARNING"]="警告: 此函数具有重复参数。";Blockly.Msg["PROCEDURES_HIGHLIGHT_DEF"]="突出显示函数定义";Blockly.Msg["PROCEDURES_IFRETURN_HELPURL"]="http://c2.com/cgi/wiki?GuardClause";Blockly.Msg["PROCEDURES_IFRETURN_TOOLTIP"]="如果值为真，则返回第二个值。";Blockly.Msg["PROCEDURES_IFRETURN_WARNING"]="警告: 仅在定义函数内可使用此块。";Blockly.Msg["PROCEDURES_MUTATORARG_TITLE"]="输入名称：";Blockly.Msg["PROCEDURES_MUTATORARG_TOOLTIP"]="添加函数输入。";Blockly.Msg["PROCEDURES_MUTATORCONTAINER_TITLE"]="输入";Blockly.Msg["PROCEDURES_MUTATORCONTAINER_TOOLTIP"]="添加、删除或重新排此函数的输入。";Blockly.Msg["PROCEDURE_ALREADY_EXISTS"]="已存在名为“%1”的步骤。";Blockly.Msg["REDO"]="重做";Blockly.Msg["REMOVE_COMMENT"]="删除注释";Blockly.Msg["RENAME_VARIABLE"]="重命名变量...";Blockly.Msg["RENAME_VARIABLE_TITLE"]="将所有“%1”变量重命名为:";Blockly.Msg["TEXT_APPEND_HELPURL"]="https://github.com/google/blockly/wiki/Text#text-modification";Blockly.Msg["TEXT_APPEND_TITLE"]="至%1附加文本%2";Blockly.Msg["TEXT_APPEND_TOOLTIP"]="将一些文本追加到变量“%1”。";Blockly.Msg["TEXT_CHANGECASE_HELPURL"]="https://github.com/google/blockly/wiki/Text#adjusting-text-case";Blockly.Msg["TEXT_CHANGECASE_OPERATOR_LOWERCASE"]="转为小写";Blockly.Msg["TEXT_CHANGECASE_OPERATOR_TITLECASE"]="将首字母大写";Blockly.Msg["TEXT_CHANGECASE_OPERATOR_UPPERCASE"]="转为大写";Blockly.Msg["TEXT_CHANGECASE_TOOLTIP"]="在不同大小写下复制并返回这段文字。";Blockly.Msg["TEXT_CHARAT_FIRST"]="获得第一个字符";Blockly.Msg["TEXT_CHARAT_FROM_END"]="获得倒数第#个字符";Blockly.Msg["TEXT_CHARAT_FROM_START"]="获得字符#";Blockly.Msg["TEXT_CHARAT_HELPURL"]="https://github.com/google/blockly/wiki/Text#extracting-text";Blockly.Msg["TEXT_CHARAT_LAST"]="获得最后一个字符";Blockly.Msg["TEXT_CHARAT_RANDOM"]="获取随机的字母";Blockly.Msg["TEXT_CHARAT_TAIL"]="";Blockly.Msg["TEXT_CHARAT_TITLE"]="在文本%1 %2";Blockly.Msg["TEXT_CHARAT_TOOLTIP"]="返回位于指定位置的字母。";Blockly.Msg["TEXT_COUNT_HELPURL"]="https://github.com/google/blockly/wiki/Text#counting-substrings";Blockly.Msg["TEXT_COUNT_MESSAGE0"]="将%1计算在%2之内";Blockly.Msg["TEXT_COUNT_TOOLTIP"]="计算在一些其他文本中，部分文本重现了多少次。";Blockly.Msg["TEXT_CREATE_JOIN_ITEM_TOOLTIP"]="将一个项添加到文本中。";Blockly.Msg["TEXT_CREATE_JOIN_TITLE_JOIN"]="加入";Blockly.Msg["TEXT_CREATE_JOIN_TOOLTIP"]="添加、移除或重新排列各节来重新配置这个文本块。";Blockly.Msg["TEXT_GET_SUBSTRING_END_FROM_END"]="到倒数第#个字符";Blockly.Msg["TEXT_GET_SUBSTRING_END_FROM_START"]="到字符#";Blockly.Msg["TEXT_GET_SUBSTRING_END_LAST"]="到最后一个字符";Blockly.Msg["TEXT_GET_SUBSTRING_HELPURL"]="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text";Blockly.Msg["TEXT_GET_SUBSTRING_INPUT_IN_TEXT"]="自文本";Blockly.Msg["TEXT_GET_SUBSTRING_START_FIRST"]="取得一段字串自第一个字符";Blockly.Msg["TEXT_GET_SUBSTRING_START_FROM_END"]="取得一段字串自倒数第#个字符";Blockly.Msg["TEXT_GET_SUBSTRING_START_FROM_START"]="取得一段字串自#";Blockly.Msg["TEXT_GET_SUBSTRING_TAIL"]="";Blockly.Msg["TEXT_GET_SUBSTRING_TOOLTIP"]="返回指定的部分文本。";Blockly.Msg["TEXT_INDEXOF_HELPURL"]="https://github.com/google/blockly/wiki/Text#finding-text";Blockly.Msg["TEXT_INDEXOF_OPERATOR_FIRST"]="中寻找第一个出现的文本";Blockly.Msg["TEXT_INDEXOF_OPERATOR_LAST"]="中寻找最后一个出现的文本";Blockly.Msg["TEXT_INDEXOF_TITLE"]="在文本%1 %2 %3";Blockly.Msg["TEXT_INDEXOF_TOOLTIP"]="返回在第二个字串中的第一/最后一个匹配项的索引值。如果未找到则返回%1。";Blockly.Msg["TEXT_ISEMPTY_HELPURL"]="https://github.com/google/blockly/wiki/Text#checking-for-empty-text";Blockly.Msg["TEXT_ISEMPTY_TITLE"]="%1是空的";Blockly.Msg["TEXT_ISEMPTY_TOOLTIP"]="如果提供的文本为空，则返回真。";Blockly.Msg["TEXT_JOIN_HELPURL"]="https://github.com/google/blockly/wiki/Text#text-creation";Blockly.Msg["TEXT_JOIN_TITLE_CREATEWITH"]="拼合多个字符串";Blockly.Msg["TEXT_JOIN_TOOLTIP"]="通过串起任意数量的项以建立一段文字。";Blockly.Msg["TEXT_LENGTH_HELPURL"]="https://github.com/google/blockly/wiki/Text#text-modification";Blockly.Msg["TEXT_LENGTH_TITLE"]="%1的长度";Blockly.Msg["TEXT_LENGTH_TOOLTIP"]="返回提供文本的字母数（包括空格）。";Blockly.Msg["TEXT_PRINT_HELPURL"]="https://github.com/google/blockly/wiki/Text#printing-text";Blockly.Msg["TEXT_PRINT_TITLE"]="打印%1";Blockly.Msg["TEXT_PRINT_TOOLTIP"]="打印指定的文字、数字或其他值。";Blockly.Msg["TEXT_PROMPT_HELPURL"]="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user";Blockly.Msg["TEXT_PROMPT_TOOLTIP_NUMBER"]="提示用户输入数字。";Blockly.Msg["TEXT_PROMPT_TOOLTIP_TEXT"]="提示用户输入一些文本。";Blockly.Msg["TEXT_PROMPT_TYPE_NUMBER"]="输入数字并显示提示消息";Blockly.Msg["TEXT_PROMPT_TYPE_TEXT"]="输入数字并显示提示消息";Blockly.Msg["TEXT_REPLACE_HELPURL"]="https://github.com/google/blockly/wiki/Text#replacing-substrings";Blockly.Msg["TEXT_REPLACE_MESSAGE0"]="在%3中，将%1替换为%2";Blockly.Msg["TEXT_REPLACE_TOOLTIP"]="在某些其他文本中，替换部分文本的所有事件。";Blockly.Msg["TEXT_REVERSE_HELPURL"]="https://github.com/google/blockly/wiki/Text#reversing-text";Blockly.Msg["TEXT_REVERSE_MESSAGE0"]="倒转%1";Blockly.Msg["TEXT_REVERSE_TOOLTIP"]="倒转文本中字符的排序。";Blockly.Msg["TEXT_TEXT_HELPURL"]="https://zh.wikipedia.org/wiki/字符串";Blockly.Msg["TEXT_TEXT_TOOLTIP"]="一个字母、单词或一行文本。";Blockly.Msg["TEXT_TRIM_HELPURL"]="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces";Blockly.Msg["TEXT_TRIM_OPERATOR_BOTH"]="消除两侧空格";Blockly.Msg["TEXT_TRIM_OPERATOR_LEFT"]="消除左侧空格";Blockly.Msg["TEXT_TRIM_OPERATOR_RIGHT"]="消除右侧空格";Blockly.Msg["TEXT_TRIM_TOOLTIP"]="复制这段文字的同时删除两端多余的空格。";Blockly.Msg["TODAY"]="今天";Blockly.Msg["UNDO"]="撤销";Blockly.Msg["VARIABLES_DEFAULT_NAME"]="项目";Blockly.Msg["VARIABLES_GET_CREATE_SET"]="创建“设定%1”";Blockly.Msg["VARIABLES_GET_HELPURL"]="https://github.com/google/blockly/wiki/Variables#get";Blockly.Msg["VARIABLES_GET_TOOLTIP"]="返回此变量的值。";Blockly.Msg["VARIABLES_SET"]="赋值 %1 等于 %2";Blockly.Msg["VARIABLES_SET_CREATE_GET"]="创建“获得%1”";Blockly.Msg["VARIABLES_SET_HELPURL"]="https://github.com/google/blockly/wiki/Variables#set";Blockly.Msg["VARIABLES_SET_TOOLTIP"]="设置此变量，以使它和输入值相等。";Blockly.Msg["VARIABLE_ALREADY_EXISTS"]="已存在名为“%1”的变量。";Blockly.Msg["VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE"]="A variable named '%1' already exists for another variable of type '%2'.";Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE;Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF;Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO;Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO;Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE;Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE;Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST;Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST;Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME;Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO;Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF;Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL;Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO;Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST;Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO;Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME;Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME;Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME;Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST;Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT;Blockly.BlockSvg.START_HAT=true;Blockly.Msg["EVENT_ROTEVENT_WARNING"]="警告: 只能在机器人事件内部使用此块！";Blockly.Msg["EVENT_HTTP_WARNING"]="警告: 只能在HTTP网络访问拼图中使用此块！";Blockly.Msg["MATH_HUE"]="230";Blockly.Msg["LOOPS_HUE"]="120";Blockly.Msg["LISTS_HUE"]="260";Blockly.Msg["LOGIC_HUE"]="210";Blockly.Msg["VARIABLES_HUE"]="330";Blockly.Msg["TEXTS_HUE"]="160";Blockly.Msg["PROCEDURES_HUE"]="290";Blockly.Msg["COLOUR_HUE"]="20";Blockly.Msg["TIME_HUE"]="90";Blockly.Msg["ROTCODE_HUE"]="45";Blockly.Msg["ROTEVENT_HUE"]="300";Blockly.Msg["ROTFUNC_HUE"]="270";Blockly.Msg["VOICEERA_HUE"]="#009AD2";Blockly.Msg["SYSDISK_HUE"]="180";Blockly.Msg["HTTP_HUE"]="200";Blockly.Msg["JSON_HUE"]="240";Blockly.Msg["REQUEST_HUE"]="20";Blockly.Constants.http.HUE=Blockly.Msg["HTTP_HUE"];Blockly.Blocks.http.HUE=Blockly.Constants.http.HUE;Blockly.Blocks.http_all={init:function(){this.appendDummyInput().appendField("HTTP网络访问");this.appendDummyInput().appendField("请求方法：").appendField(new Blockly.FieldDropdown([["GET","GET"],["POST","POST"]],function(a){this.sourceBlock_.updateShape_(a)}),"method");this.appendValueInput("url").setCheck("String").appendField("请求地址");this.appendStatementInput("callback").appendField("响应处理");this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.http.HUE);this.setTooltip("HTTP网络访问");this.setHelpUrl("")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("method",this.getFieldValue("method"));return a},domToMutation:function(a){var b=a.getAttribute("method");this.updateShape_(b)},updateShape_:function(b){var a=this.getFieldValue("method");if(b!=a){if(b=="GET"){this.removeInput("params");this.removeInput("contentTypeInput");this.unplug(true,true)}else{this.unplug(true,true);this.removeInput("callback");this.appendValueInput("params").setCheck(["String","map"]).appendField("请求参数");this.appendDummyInput("contentTypeInput").appendField("请求媒体类型：").appendField(new Blockly.FieldDropdown([["application/json","application/json"],["application/x-www-form-urlencoded","application/x-www-form-urlencoded"]]),"contentType");this.appendStatementInput("callback").appendField("响应处理");this.setPreviousStatement(true)}}}};Blockly.Blocks.http_all_responsebody={init:function(){this.appendDummyInput().appendField("HTTP响应内容");this.setOutput(true);this.setColour(200);this.setTooltip("HTTP响应内容");this.setOutput(true,"String");this.setHelpUrl("")},onchange:function(){var a=false;var b=this;do{if(b.type=="http_all"){a=true;break}b=b.getSurroundParent()}while(b);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_HTTP_WARNING)}}};Blockly.Blocks.http_all_responsecode={init:function(){this.appendDummyInput().appendField("HTTP响应状态码");this.setOutput(true);this.setColour(200);this.setTooltip("HTTP响应状态码");this.setOutput(true,"Number");this.setHelpUrl("")},onchange:function(){var a=false;var b=this;do{if(b.type=="http_all"){a=true;break}b=b.getSurroundParent()}while(b);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_HTTP_WARNING)}}};Blockly.Constants.json.HUE=Blockly.Msg["JSON_HUE"];Blockly.Blocks.json.HUE=Blockly.Constants.json.HUE;Blockly.Blocks.json_getKey={init:function(){this.appendDummyInput().appendField("取出json");this.appendValueInput("VAR");this.appendValueInput("propertyName").setCheck("String").appendField("中");this.appendDummyInput().appendField("的值");this.setInputsInline(true);this.setOutput(true);this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("获取键值");this.setHelpUrl(null);this.contextMenuMsg_=Blockly.Msg.VARIABLES_GET_CREATE_SET}};Blockly.Blocks.json_deleteKey={init:function(){this.appendDummyInput().appendField("删除json");this.appendValueInput("VAR");this.appendValueInput("propertyName").setCheck("String").appendField("中  键值（key）为");this.appendDummyInput().appendField("的记录");this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("删除键值");this.setHelpUrl(null);this.contextMenuMsg_=Blockly.Msg.VARIABLES_SET_CREATE_GET}};Blockly.Blocks.json_setKey={init:function(){this.appendDummyInput().appendField("设置json");this.appendValueInput("VAR");this.appendValueInput("propertyName").setCheck("String").appendField("中");this.appendDummyInput().appendField("的值");this.appendValueInput("valueName").appendField("等于");this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("设置键值");this.setHelpUrl(null);this.contextMenuMsg_=Blockly.Msg.VARIABLES_SET_CREATE_GET}};Blockly.Blocks.json_getLength={init:function(){this.appendValueInput("NAME").setCheck("json").appendField("json");this.appendDummyInput().appendField("的长度");this.setInputsInline(true);this.setOutput(true,"Number");this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("返回json的长度");this.setHelpUrl(null)}};Blockly.Blocks.json_createJson={init:function(){this.appendDummyInput().appendField("创建一个空json");this.setInputsInline(true);this.setOutput(true);this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("创建一个空json");this.setHelpUrl(null)}};Blockly.Blocks.json_stringify={init:function(){this.appendValueInput("text").setCheck("Array").appendField("将js对象");this.appendDummyInput().appendField("反解析为json文本");this.setOutput(true,"String");this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("将js对象反解析为json文本");this.setHelpUrl(null)}};Blockly.Blocks.json_parse={init:function(){this.appendValueInput("content").setCheck("String").appendField("将JSON");this.appendDummyInput().appendField("解析为js对象");this.setOutput(true);this.setColour(Blockly.Blocks.json.HUE);this.setTooltip("将JSON解析为js对象");this.setHelpUrl(null)}};Blockly.Constants.Lists.HUE=260;Blockly.defineBlocksWithJsonArray([{"type":"lists_create_empty","message0":"%{BKY_LISTS_CREATE_EMPTY_TITLE}","output":"Array","colour":"%{BKY_LISTS_HUE}","tooltip":"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}","helpUrl":"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{"type":"lists_repeat","message0":"%{BKY_LISTS_REPEAT_TITLE}","args0":[{"type":"input_value","name":"ITEM"},{"type":"input_value","name":"NUM","check":"Number"}],"output":"Array","colour":"%{BKY_LISTS_HUE}","tooltip":"%{BKY_LISTS_REPEAT_TOOLTIP}","helpUrl":"%{BKY_LISTS_REPEAT_HELPURL}"},{"type":"lists_reverse","message0":"%{BKY_LISTS_REVERSE_MESSAGE0}","args0":[{"type":"input_value","name":"LIST","check":"Array"}],"output":"Array","inputsInline":true,"colour":"%{BKY_LISTS_HUE}","tooltip":"%{BKY_LISTS_REVERSE_TOOLTIP}","helpUrl":"%{BKY_LISTS_REVERSE_HELPURL}"},{"type":"lists_isEmpty","message0":"%{BKY_LISTS_ISEMPTY_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":["String","Array"]}],"output":"Boolean","colour":"%{BKY_LISTS_HUE}","tooltip":"%{BKY_LISTS_ISEMPTY_TOOLTIP}","helpUrl":"%{BKY_LISTS_ISEMPTY_HELPURL}"},{"type":"lists_length","message0":"%{BKY_LISTS_LENGTH_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":["String","Array"]}],"output":"Number","colour":"%{BKY_LISTS_HUE}","tooltip":"%{BKY_LISTS_LENGTH_TOOLTIP}","helpUrl":"%{BKY_LISTS_LENGTH_HELPURL}"}]);Blockly.Blocks['lists_create_with']={init:function(){this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);this.itemCount_=3;this.updateShape_();this.setOutput(true,'Array');this.setMutator(new Blockly.Mutator(['lists_create_with_item']));this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('items',this.itemCount_);return container},domToMutation:function(xmlElement){this.itemCount_=parseInt(xmlElement.getAttribute('items'),10);this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock('lists_create_with_container');containerBlock.initSvg();var connection=containerBlock.getInput('STACK').connection;for(var i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock('lists_create_with_item');itemBlock.initSvg();connection.connect(itemBlock.previousConnection);connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock('STACK');var connections=[];while(itemBlock){connections.push(itemBlock.valueConnection_);itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}for(var i=0;i<this.itemCount_;i++){var connection=this.getInput('ADD'+i).connection.targetConnection;if(connection&&connections.indexOf(connection)==-1){connection.disconnect()}}this.itemCount_=connections.length;this.updateShape_();for(var i=0;i<this.itemCount_;i++){Blockly.Mutator.reconnect(connections[i],this,'ADD'+i)}},saveConnections:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock('STACK');var i=0;while(itemBlock){var input=this.getInput('ADD'+i);itemBlock.valueConnection_=input&&input.connection.targetConnection;i++;itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.itemCount_&&this.getInput('EMPTY')){this.removeInput('EMPTY')}else if(!this.itemCount_&&!this.getInput('EMPTY')){this.appendDummyInput('EMPTY').appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE)}for(var i=0;i<this.itemCount_;i++){if(!this.getInput('ADD'+i)){var input=this.appendValueInput('ADD'+i);if(i==0){input.appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)}}}while(this.getInput('ADD'+i)){this.removeInput('ADD'+i);i++}}};Blockly.Blocks['lists_create_with_container']={init:function(){this.setColour(Blockly.Msg.LISTS_HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput('STACK');this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=false}};Blockly.Blocks['lists_create_with_item']={init:function(){this.setColour(Blockly.Msg.LISTS_HUE);this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=false}};Blockly.Blocks['lists_indexOf']={init:function(){var OPERATORS=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,'FIRST'],[Blockly.Msg.LISTS_INDEX_OF_LAST,'LAST']];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);this.setOutput(true,'Number');this.appendValueInput('VALUE').setCheck('Array').appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput('FIND').appendField(new Blockly.FieldDropdown(OPERATORS),'END');this.setInputsInline(true);var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace('%1',thisBlock.workspace.options.oneBasedIndex?'0':'-1')})}};Blockly.Blocks['lists_getIndex']={init:function(){var MODE=[[Blockly.Msg.LISTS_GET_INDEX_GET,'GET'],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,'GET_REMOVE'],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,'REMOVE']];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,'FROM_START'],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,'FROM_END'],[Blockly.Msg.LISTS_GET_INDEX_FIRST,'FIRST'],[Blockly.Msg.LISTS_GET_INDEX_LAST,'LAST'],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,'RANDOM']];this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);var modeMenu=new Blockly.FieldDropdown(MODE,function(value){var isStatement=(value=='REMOVE');this.sourceBlock_.updateStatement_(isStatement)});this.appendValueInput('VALUE').setCheck('Array').appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(modeMenu,'MODE').appendField('','SPACE');this.appendDummyInput('AT');if(Blockly.Msg.LISTS_GET_INDEX_TAIL){this.appendDummyInput('TAIL').appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL)}this.setInputsInline(true);this.setOutput(true);this.updateAt_(true);var thisBlock=this;this.setTooltip(function(){var mode=thisBlock.getFieldValue('MODE');var where=thisBlock.getFieldValue('WHERE');var tooltip='';switch(mode+' '+where){case'GET FROM_START':case'GET FROM_END':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case'GET FIRST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case'GET LAST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case'GET RANDOM':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case'GET_REMOVE FROM_START':case'GET_REMOVE FROM_END':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case'GET_REMOVE FIRST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case'GET_REMOVE LAST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case'GET_REMOVE RANDOM':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case'REMOVE FROM_START':case'REMOVE FROM_END':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case'REMOVE FIRST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case'REMOVE LAST':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case'REMOVE RANDOM':tooltip=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM;break}if(where=='FROM_START'||where=='FROM_END'){var msg=(where=='FROM_START')?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP;tooltip+='  '+msg.replace('%1',thisBlock.workspace.options.oneBasedIndex?'#1':'#0')}return tooltip})},mutationToDom:function(){var container=document.createElement('mutation');var isStatement=!this.outputConnection;container.setAttribute('statement',isStatement);var isAt=this.getInput('AT').type==Blockly.INPUT_VALUE;container.setAttribute('at',isAt);return container},domToMutation:function(xmlElement){var isStatement=(xmlElement.getAttribute('statement')=='true');this.updateStatement_(isStatement);var isAt=(xmlElement.getAttribute('at')!='false');this.updateAt_(isAt)},updateStatement_:function(newStatement){var oldStatement=!this.outputConnection;if(newStatement!=oldStatement){this.unplug(true,true);if(newStatement){this.setOutput(false);this.setPreviousStatement(true);this.setNextStatement(true)}else{this.setPreviousStatement(false);this.setNextStatement(false);this.setOutput(true)}}},updateAt_:function(isAt){this.removeInput('AT');this.removeInput('ORDINAL',true);if(isAt){this.appendValueInput('AT').setCheck('Number');if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX){this.appendDummyInput('ORDINAL').appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}}else{this.appendDummyInput('AT')}var menu=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(value){var newAt=(value=='FROM_START')||(value=='FROM_END');if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,'WHERE');return null}return undefined});this.getInput('AT').appendField(menu,'WHERE');if(Blockly.Msg.LISTS_GET_INDEX_TAIL){this.moveInputBefore('TAIL',null)}}};Blockly.Blocks['lists_setIndex']={init:function(){var MODE=[[Blockly.Msg.LISTS_SET_INDEX_SET,'SET'],[Blockly.Msg.LISTS_SET_INDEX_INSERT,'INSERT']];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,'FROM_START'],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,'FROM_END'],[Blockly.Msg.LISTS_GET_INDEX_FIRST,'FIRST'],[Blockly.Msg.LISTS_GET_INDEX_LAST,'LAST'],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,'RANDOM']];this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);this.appendValueInput('LIST').setCheck('Array').appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(new Blockly.FieldDropdown(MODE),'MODE').appendField('','SPACE');this.appendDummyInput('AT');this.appendValueInput('TO').appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP);this.updateAt_(true);var thisBlock=this;this.setTooltip(function(){var mode=thisBlock.getFieldValue('MODE');var where=thisBlock.getFieldValue('WHERE');var tooltip='';switch(mode+' '+where){case'SET FROM_START':case'SET FROM_END':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case'SET FIRST':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case'SET LAST':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case'SET RANDOM':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case'INSERT FROM_START':case'INSERT FROM_END':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case'INSERT FIRST':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case'INSERT LAST':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case'INSERT RANDOM':tooltip=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM;break}if(where=='FROM_START'||where=='FROM_END'){tooltip+='  '+Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace('%1',thisBlock.workspace.options.oneBasedIndex?'#1':'#0')}return tooltip})},mutationToDom:function(){var container=document.createElement('mutation');var isAt=this.getInput('AT').type==Blockly.INPUT_VALUE;container.setAttribute('at',isAt);return container},domToMutation:function(xmlElement){var isAt=(xmlElement.getAttribute('at')!='false');this.updateAt_(isAt)},updateAt_:function(isAt){this.removeInput('AT');this.removeInput('ORDINAL',true);if(isAt){this.appendValueInput('AT').setCheck('Number');if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX){this.appendDummyInput('ORDINAL').appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}}else{this.appendDummyInput('AT')}var menu=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(value){var newAt=(value=='FROM_START')||(value=='FROM_END');if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,'WHERE');return null}return undefined});this.moveInputBefore('AT','TO');if(this.getInput('ORDINAL')){this.moveInputBefore('ORDINAL','TO')}this.getInput('AT').appendField(menu,'WHERE')}};Blockly.Blocks['lists_getSublist']={init:function(){this['WHERE_OPTIONS_1']=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,'FROM_START'],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,'FROM_END'],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,'FIRST']];this['WHERE_OPTIONS_2']=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,'FROM_START'],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,'FROM_END'],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,'LAST']];this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);this.appendValueInput('LIST').setCheck('Array').appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);this.appendDummyInput('AT1');this.appendDummyInput('AT2');if(Blockly.Msg.LISTS_GET_SUBLIST_TAIL){this.appendDummyInput('TAIL').appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL)}this.setInputsInline(true);this.setOutput(true,'Array');this.updateAt_(1,true);this.updateAt_(2,true);this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var container=document.createElement('mutation');var isAt1=this.getInput('AT1').type==Blockly.INPUT_VALUE;container.setAttribute('at1',isAt1);var isAt2=this.getInput('AT2').type==Blockly.INPUT_VALUE;container.setAttribute('at2',isAt2);return container},domToMutation:function(xmlElement){var isAt1=(xmlElement.getAttribute('at1')=='true');var isAt2=(xmlElement.getAttribute('at2')=='true');this.updateAt_(1,isAt1);this.updateAt_(2,isAt2)},updateAt_:function(n,isAt){this.removeInput('AT'+n);this.removeInput('ORDINAL'+n,true);if(isAt){this.appendValueInput('AT'+n).setCheck('Number');if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX){this.appendDummyInput('ORDINAL'+n).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}}else{this.appendDummyInput('AT'+n)}var menu=new Blockly.FieldDropdown(this['WHERE_OPTIONS_'+n],function(value){var newAt=(value=='FROM_START')||(value=='FROM_END');if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(n,newAt);block.setFieldValue(value,'WHERE'+n);return null}return undefined});this.getInput('AT'+n).appendField(menu,'WHERE'+n);if(n==1){this.moveInputBefore('AT1','AT2');if(this.getInput('ORDINAL1')){this.moveInputBefore('ORDINAL1','AT2')}}if(Blockly.Msg.LISTS_GET_SUBLIST_TAIL){this.moveInputBefore('TAIL',null)}}};Blockly.Blocks['lists_sort']={init:function(){this.jsonInit({"message0":Blockly.Msg.LISTS_SORT_TITLE,"args0":[{"type":"field_dropdown","name":"TYPE","options":[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{"type":"field_dropdown","name":"DIRECTION","options":[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{"type":"input_value","name":"LIST","check":"Array"}],"output":"Array","colour":Blockly.Msg.LISTS_HUE,"tooltip":Blockly.Msg.LISTS_SORT_TOOLTIP,"helpUrl":Blockly.Msg.LISTS_SORT_HELPURL})}};Blockly.Blocks['lists_split']={init:function(){var thisBlock=this;var dropdown=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,'SPLIT'],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,'JOIN']],function(newMode){thisBlock.updateType_(newMode)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL);this.setColour(Blockly.Msg.LISTS_HUE);this.appendValueInput('INPUT').setCheck('String').appendField(dropdown,'MODE');this.appendValueInput('DELIM').setCheck('String').appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER);this.setInputsInline(true);this.setOutput(true,'Array');this.setTooltip(function(){var mode=thisBlock.getFieldValue('MODE');if(mode=='SPLIT'){return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT}else if(mode=='JOIN'){return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN}throw'Unknown mode: '+mode;})},updateType_:function(newMode){if(newMode=='SPLIT'){this.outputConnection.setCheck('Array');this.getInput('INPUT').setCheck('String')}else{this.outputConnection.setCheck('String');this.getInput('INPUT').setCheck('Array')}},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('mode',this.getFieldValue('MODE'));return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute('mode'))}};Blockly.Constants.Logic.HUE=210;Blockly.defineBlocksWithJsonArray([{"type":"logic_boolean","message0":"%1","args0":[{"type":"field_dropdown","name":"BOOL","options":[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],"output":"Boolean","colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_LOGIC_BOOLEAN_TOOLTIP}","helpUrl":"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{"type":"controls_if","message0":"%{BKY_CONTROLS_IF_MSG_IF} %1","args0":[{"type":"input_value","name":"IF0","check":"Boolean"}],"message1":"%{BKY_CONTROLS_IF_MSG_THEN} %1","args1":[{"type":"input_statement","name":"DO0"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOGIC_HUE}","helpUrl":"%{BKY_CONTROLS_IF_HELPURL}","mutator":"controls_if_mutator","extensions":["controls_if_tooltip"]},{"type":"controls_ifelse","message0":"%{BKY_CONTROLS_IF_MSG_IF} %1","args0":[{"type":"input_value","name":"IF0","check":"Boolean"}],"message1":"%{BKY_CONTROLS_IF_MSG_THEN} %1","args1":[{"type":"input_statement","name":"DO0"}],"message2":"%{BKY_CONTROLS_IF_MSG_ELSE} %1","args2":[{"type":"input_statement","name":"ELSE"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKYCONTROLS_IF_TOOLTIP_2}","helpUrl":"%{BKY_CONTROLS_IF_HELPURL}","extensions":["controls_if_tooltip"]},{"type":"logic_compare","message0":"%1 %2 %3","args0":[{"type":"input_value","name":"A"},{"type":"field_dropdown","name":"OP","options":[["=","EQ"],["\u2260","NEQ"],["<","LT"],["\u2264","LTE"],[">","GT"],["\u2265","GTE"]]},{"type":"input_value","name":"B"}],"inputsInline":true,"output":"Boolean","colour":"%{BKY_LOGIC_HUE}","helpUrl":"%{BKY_LOGIC_COMPARE_HELPURL}","extensions":["logic_compare","logic_op_tooltip"]},{"type":"logic_operation","message0":"%1 %2 %3","args0":[{"type":"input_value","name":"A","check":"Boolean"},{"type":"field_dropdown","name":"OP","options":[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{"type":"input_value","name":"B","check":"Boolean"}],"inputsInline":true,"output":"Boolean","colour":"%{BKY_LOGIC_HUE}","helpUrl":"%{BKY_LOGIC_OPERATION_HELPURL}","extensions":["logic_op_tooltip"]},{"type":"logic_negate","message0":"%{BKY_LOGIC_NEGATE_TITLE}","args0":[{"type":"input_value","name":"BOOL","check":"Boolean"}],"output":"Boolean","colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_LOGIC_NEGATE_TOOLTIP}","helpUrl":"%{BKY_LOGIC_NEGATE_HELPURL}"},{"type":"logic_null","message0":"%{BKY_LOGIC_NULL}","output":null,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_LOGIC_NULL_TOOLTIP}","helpUrl":"%{BKY_LOGIC_NULL_HELPURL}"},{"type":"logic_ternary","message0":"%{BKY_LOGIC_TERNARY_CONDITION} %1","args0":[{"type":"input_value","name":"IF","check":"Boolean"}],"message1":"%{BKY_LOGIC_TERNARY_IF_TRUE} %1","args1":[{"type":"input_value","name":"THEN"}],"message2":"%{BKY_LOGIC_TERNARY_IF_FALSE} %1","args2":[{"type":"input_value","name":"ELSE"}],"output":null,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_LOGIC_TERNARY_TOOLTIP}","helpUrl":"%{BKY_LOGIC_TERNARY_HELPURL}","extensions":["logic_ternary"]}]);Blockly.defineBlocksWithJsonArray([{"type":"controls_if_if","message0":"%{BKY_CONTROLS_IF_IF_TITLE_IF}","nextStatement":null,"enableContextMenu":false,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{"type":"controls_if_elseif","message0":"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}","previousStatement":null,"nextStatement":null,"enableContextMenu":false,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{"type":"controls_if_else","message0":"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}","previousStatement":null,"enableContextMenu":false,"colour":"%{BKY_LOGIC_HUE}","tooltip":"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);Blockly.Constants.Logic.TOOLTIPS_BY_OP={'EQ':'%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}','NEQ':'%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}','LT':'%{BKY_LOGIC_COMPARE_TOOLTIP_LT}','LTE':'%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}','GT':'%{BKY_LOGIC_COMPARE_TOOLTIP_GT}','GTE':'%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}','AND':'%{BKY_LOGIC_OPERATION_TOOLTIP_AND}','OR':'%{BKY_LOGIC_OPERATION_TOOLTIP_OR}'};Blockly.Extensions.register('logic_op_tooltip',Blockly.Extensions.buildTooltipForDropdown('OP',Blockly.Constants.Logic.TOOLTIPS_BY_OP));Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_){return null}var container=document.createElement('mutation');if(this.elseifCount_){container.setAttribute('elseif',this.elseifCount_)}if(this.elseCount_){container.setAttribute('else',1)}return container},domToMutation:function(xmlElement){this.elseifCount_=parseInt(xmlElement.getAttribute('elseif'),10)||0;this.elseCount_=parseInt(xmlElement.getAttribute('else'),10)||0;this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock('controls_if_if');containerBlock.initSvg();var connection=containerBlock.nextConnection;for(var i=1;i<=this.elseifCount_;i++){var elseifBlock=workspace.newBlock('controls_if_elseif');elseifBlock.initSvg();connection.connect(elseifBlock.previousConnection);connection=elseifBlock.nextConnection}if(this.elseCount_){var elseBlock=workspace.newBlock('controls_if_else');elseBlock.initSvg();connection.connect(elseBlock.previousConnection)}return containerBlock},compose:function(containerBlock){var clauseBlock=containerBlock.nextConnection.targetBlock();this.elseifCount_=0;this.elseCount_=0;var valueConnections=[null];var statementConnections=[null];var elseStatementConnection=null;while(clauseBlock){switch(clauseBlock.type){case'controls_if_elseif':this.elseifCount_++;valueConnections.push(clauseBlock.valueConnection_);statementConnections.push(clauseBlock.statementConnection_);break;case'controls_if_else':this.elseCount_++;elseStatementConnection=clauseBlock.statementConnection_;break;default:throw'Unknown block type.';}clauseBlock=clauseBlock.nextConnection&&clauseBlock.nextConnection.targetBlock()}this.updateShape_();for(var i=1;i<=this.elseifCount_;i++){Blockly.Mutator.reconnect(valueConnections[i],this,'IF'+i);Blockly.Mutator.reconnect(statementConnections[i],this,'DO'+i)}Blockly.Mutator.reconnect(elseStatementConnection,this,'ELSE')},saveConnections:function(containerBlock){var clauseBlock=containerBlock.nextConnection.targetBlock();var i=1;while(clauseBlock){switch(clauseBlock.type){case'controls_if_elseif':var inputIf=this.getInput('IF'+i);var inputDo=this.getInput('DO'+i);clauseBlock.valueConnection_=inputIf&&inputIf.connection.targetConnection;clauseBlock.statementConnection_=inputDo&&inputDo.connection.targetConnection;i++;break;case'controls_if_else':var inputDo=this.getInput('ELSE');clauseBlock.statementConnection_=inputDo&&inputDo.connection.targetConnection;break;default:throw'Unknown block type.';}clauseBlock=clauseBlock.nextConnection&&clauseBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.getInput('ELSE')){this.removeInput('ELSE')}var i=1;while(this.getInput('IF'+i)){this.removeInput('IF'+i);this.removeInput('DO'+i);i++}for(var i=1;i<=this.elseifCount_;i++){this.appendValueInput('IF'+i).setCheck('Boolean').appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF);this.appendStatementInput('DO'+i).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN)}if(this.elseCount_){this.appendStatementInput('ELSE').appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}}};Blockly.Extensions.registerMutator('controls_if_mutator',Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,['controls_if_elseif','controls_if_else']);Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){if(!this.elseifCount_&&!this.elseCount_){return Blockly.Msg.CONTROLS_IF_TOOLTIP_1}else if(!this.elseifCount_&&this.elseCount_){return Blockly.Msg.CONTROLS_IF_TOOLTIP_2}else if(this.elseifCount_&&!this.elseCount_){return Blockly.Msg.CONTROLS_IF_TOOLTIP_3}else if(this.elseifCount_&&this.elseCount_){return Blockly.Msg.CONTROLS_IF_TOOLTIP_4}return''}.bind(this))};Blockly.Extensions.register('controls_if_tooltip',Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);Blockly.Constants.Logic.fixLogicCompareRtlOpLabels=function(){var rtlOpLabels={'LT':'\u200F<\u200F','LTE':'\u200F\u2264\u200F','GT':'\u200F>\u200F','GTE':'\u200F\u2265\u200F'};var opDropdown=this.getField('OP');if(opDropdown){var options=opDropdown.getOptions();for(var i=0;i<options.length;++i){var tuple=options[i];var op=tuple[1];var rtlLabel=rtlOpLabels[op];if(goog.isString(tuple[0])&&rtlLabel){tuple[0]=rtlLabel}}}};Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){if(!this.prevBlocks_){this.prevBlocks_=[null,null]}var blockA=this.getInputTargetBlock('A');var blockB=this.getInputTargetBlock('B');if(blockA&&blockB&&!blockA.outputConnection.checkType_(blockB.outputConnection)){Blockly.Events.setGroup(e.group);var prevA=this.prevBlocks_[0];if(prevA!==blockA){blockA.unplug();if(prevA&&!prevA.isShadow()){this.getInput('A').connection.connect(prevA.outputConnection)}}var prevB=this.prevBlocks_[1];if(prevB!==blockB){blockB.unplug();if(prevB&&!prevB.isShadow()){this.getInput('B').connection.connect(prevB.outputConnection)}}this.bumpNeighbours_();Blockly.Events.setGroup(false)}this.prevBlocks_[0]=this.getInputTargetBlock('A');this.prevBlocks_[1]=this.getInputTargetBlock('B')}};Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){if(this.RTL){Blockly.Constants.Logic.fixLogicCompareRtlOpLabels.apply(this)}this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)};Blockly.Extensions.register('logic_compare',Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION);Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var blockA=this.getInputTargetBlock('THEN');var blockB=this.getInputTargetBlock('ELSE');var parentConnection=this.outputConnection.targetConnection;if((blockA||blockB)&&parentConnection){for(var i=0;i<2;i++){var block=(i==1)?blockA:blockB;if(block&&!block.outputConnection.checkType_(parentConnection)){Blockly.Events.setGroup(e.group);if(parentConnection===this.prevParentConnection_){this.unplug();parentConnection.getSourceBlock().bumpNeighbours_()}else{block.unplug();block.bumpNeighbours_()}Blockly.Events.setGroup(false)}}}this.prevParentConnection_=parentConnection}};Blockly.Extensions.registerMixin('logic_ternary',Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);Blockly.Blocks["logic_switch_default"]={init:function(){this.appendDummyInput().appendField("当以上语句都不对时");this.appendStatementInput("onDefault").setCheck(null).appendField("执行");this.setPreviousStatement(true,"case");this.setColour(Blockly.Msg.LOGIC_HUE);this.setTooltip("switch..case语句根(default)");this.setHelpUrl(null)},onchange:function(b){var a=false;var c=this;do{if(true){try{if(c.type=="logic_switch"){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText("请配套使用该拼图")}}};Blockly.Blocks["logic_case"]={init:function(){this.appendValueInput("caseName").appendField("当变量为");this.appendDummyInput().appendField("时");this.appendStatementInput("call").appendField("执行");this.setInputsInline(true);this.setPreviousStatement(true,"case");this.setNextStatement(true,"case");this.setColour(Blockly.Msg.LOGIC_HUE);this.setTooltip("switch..case语句根(case)");this.setHelpUrl(null)},onchange:function(b){var a=false;var c=this;do{if(true){try{if(c.type=="logic_switch"){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText("请配套使用该拼图")}}};Blockly.Blocks["logic_switch"]={init:function(){this.appendValueInput("value_name").setCheck(null).appendField("当变量");this.appendDummyInput().appendField("拥有以下情况时");this.appendStatementInput("calling").setCheck("case");this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Msg.LOGIC_HUE);this.setTooltip("switch..case语句根(switch)");this.setHelpUrl(null)}};Blockly.Constants.Loops.HUE=120;Blockly.defineBlocksWithJsonArray([{"type":"controls_repeat_ext","message0":"%{BKY_CONTROLS_REPEAT_TITLE}","args0":[{"type":"input_value","name":"TIMES","check":"Number"}],"message1":"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1","args1":[{"type":"input_statement","name":"DO"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOOPS_HUE}","tooltip":"%{BKY_CONTROLS_REPEAT_TOOLTIP}","helpUrl":"%{BKY_CONTROLS_REPEAT_HELPURL}"},{"type":"controls_repeat","message0":"%{BKY_CONTROLS_REPEAT_TITLE}","args0":[{"type":"field_number","name":"TIMES","value":10,"min":0,"precision":1}],"message1":"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1","args1":[{"type":"input_statement","name":"DO"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOOPS_HUE}","tooltip":"%{BKY_CONTROLS_REPEAT_TOOLTIP}","helpUrl":"%{BKY_CONTROLS_REPEAT_HELPURL}"},{"type":"controls_whileUntil","message0":"%1 %2","args0":[{"type":"field_dropdown","name":"MODE","options":[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{"type":"input_value","name":"BOOL","check":"Boolean"}],"message1":"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1","args1":[{"type":"input_statement","name":"DO"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOOPS_HUE}","helpUrl":"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}","extensions":["controls_whileUntil_tooltip"]},{"type":"controls_for","message0":"%{BKY_CONTROLS_FOR_TITLE}","args0":[{"type":"field_variable","name":"VAR","variable":null},{"type":"input_value","name":"FROM","check":"Number","align":"RIGHT"},{"type":"input_value","name":"TO","check":"Number","align":"RIGHT"},{"type":"input_value","name":"BY","check":"Number","align":"RIGHT"}],"message1":"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1","args1":[{"type":"input_statement","name":"DO"}],"inputsInline":true,"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOOPS_HUE}","helpUrl":"%{BKY_CONTROLS_FOR_HELPURL}","extensions":["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{"type":"controls_forEach","message0":"%{BKY_CONTROLS_FOREACH_TITLE}","args0":[{"type":"field_variable","name":"VAR","variable":null},{"type":"input_value","name":"LIST","check":"Array"}],"message1":"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1","args1":[{"type":"input_statement","name":"DO"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_LOOPS_HUE}","helpUrl":"%{BKY_CONTROLS_FOREACH_HELPURL}","extensions":["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{"type":"controls_flow_statements","message0":"%1","args0":[{"type":"field_dropdown","name":"FLOW","options":[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],"previousStatement":null,"colour":"%{BKY_LOOPS_HUE}","helpUrl":"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}","extensions":["controls_flow_tooltip","controls_flow_in_loop_check"]}]);Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS={'WHILE':'%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}','UNTIL':'%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}'};Blockly.Extensions.register('controls_whileUntil_tooltip',Blockly.Extensions.buildTooltipForDropdown('MODE',Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS));Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={'BREAK':'%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}','CONTINUE':'%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}'};Blockly.Extensions.register('controls_flow_tooltip',Blockly.Extensions.buildTooltipForDropdown('FLOW',Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(options){if(this.isInFlyout){return}var variable=this.getField('VAR').getVariable();var varName=variable.name;if(!this.isCollapsed()&&varName!=null){var option={enabled:true};option.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace('%1',varName);var xmlField=Blockly.Variables.generateVariableFieldDom(variable);var xmlBlock=goog.dom.createDom('block',null,xmlField);xmlBlock.setAttribute('type','variables_get');option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}}};Blockly.Extensions.registerMixin('contextMenu_newGetVariableBlock',Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);Blockly.Extensions.register('controls_for_tooltip',Blockly.Extensions.buildTooltipWithFieldText('%{BKY_CONTROLS_FOR_TOOLTIP}','VAR'));Blockly.Extensions.register('controls_forEach_tooltip',Blockly.Extensions.buildTooltipWithFieldText('%{BKY_CONTROLS_FOREACH_TOOLTIP}','VAR'));Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:['controls_repeat','controls_repeat_ext','controls_forEach','controls_for','controls_whileUntil'],onchange:function(){if(!this.workspace.isDragging||this.workspace.isDragging()){return}var legal=false;var block=this;do{if(this.LOOP_TYPES.indexOf(block.type)!=-1){legal=true;break}block=block.getSurroundParent()}while(block);if(legal){this.setWarningText(null);if(!this.isInFlyout){this.setDisabled(false)}}else{this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING);if(!this.isInFlyout&&!this.getInheritedDisabled()){this.setDisabled(true)}}}};Blockly.Extensions.registerMixin('controls_flow_in_loop_check',Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);Blockly.Constants.Math.HUE=230;Blockly.defineBlocksWithJsonArray([{"type":"math_number","message0":"%1","args0":[{"type":"field_number","name":"NUM","value":0}],"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_NUMBER_HELPURL}","tooltip":"%{BKY_MATH_NUMBER_TOOLTIP}","extensions":["parent_tooltip_when_inline"]},{"type":"math_arithmetic","message0":"%1 %2 %3","args0":[{"type":"input_value","name":"A","check":"Number"},{"type":"field_dropdown","name":"OP","options":[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{"type":"input_value","name":"B","check":"Number"}],"inputsInline":true,"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_ARITHMETIC_HELPURL}","extensions":["math_op_tooltip"]},{"type":"math_single","message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[["%{BKY_MATH_SINGLE_OP_ROOT}",'ROOT'],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}",'ABS'],['-','NEG'],['ln','LN'],['log10','LOG10'],['e^','EXP'],['10^','POW10']]},{"type":"input_value","name":"NUM","check":"Number"}],"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_SINGLE_HELPURL}","extensions":["math_op_tooltip"]},{"type":"math_trig","message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{"type":"input_value","name":"NUM","check":"Number"}],"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_TRIG_HELPURL}","extensions":["math_op_tooltip"]},{"type":"math_constant","message0":"%1","args0":[{"type":"field_dropdown","name":"CONSTANT","options":[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\u00bd)","SQRT1_2"],["\u221e","INFINITY"]]}],"output":"Number","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_CONSTANT_TOOLTIP}","helpUrl":"%{BKY_MATH_CONSTANT_HELPURL}"},{"type":"math_number_property","message0":"%1 %2","args0":[{"type":"input_value","name":"NUMBER_TO_CHECK","check":"Number"},{"type":"field_dropdown","name":"PROPERTY","options":[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],"inputsInline":true,"output":"Boolean","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_IS_TOOLTIP}","mutator":"math_is_divisibleby_mutator"},{"type":"math_change","message0":"%{BKY_MATH_CHANGE_TITLE}","args0":[{"type":"field_variable","name":"VAR","variable":"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{"type":"input_value","name":"DELTA","check":"Number"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_VARIABLES_HUE}","helpUrl":"%{BKY_MATH_CHANGE_HELPURL}","extensions":["math_change_tooltip"]},{"type":"math_round","message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{"type":"input_value","name":"NUM","check":"Number"}],"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_ROUND_HELPURL}","tooltip":"%{BKY_MATH_ROUND_TOOLTIP}"},{"type":"math_on_list","message0":"%1 %2","args0":[{"type":"field_dropdown","name":"OP","options":[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{"type":"input_value","name":"LIST","check":"Array"}],"output":"Number","colour":"%{BKY_MATH_HUE}","helpUrl":"%{BKY_MATH_ONLIST_HELPURL}","mutator":"math_modes_of_list_mutator","extensions":["math_op_tooltip"]},{"type":"math_modulo","message0":"%{BKY_MATH_MODULO_TITLE}","args0":[{"type":"input_value","name":"DIVIDEND","check":"Number"},{"type":"input_value","name":"DIVISOR","check":"Number"}],"inputsInline":true,"output":"Number","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_MODULO_TOOLTIP}","helpUrl":"%{BKY_MATH_MODULO_HELPURL}"},{"type":"math_constrain","message0":"%{BKY_MATH_CONSTRAIN_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":"Number"},{"type":"input_value","name":"LOW","check":"Number"},{"type":"input_value","name":"HIGH","check":"Number"}],"inputsInline":true,"output":"Number","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_CONSTRAIN_TOOLTIP}","helpUrl":"%{BKY_MATH_CONSTRAIN_HELPURL}"},{"type":"math_random_int","message0":"%{BKY_MATH_RANDOM_INT_TITLE}","args0":[{"type":"input_value","name":"FROM","check":"Number"},{"type":"input_value","name":"TO","check":"Number"}],"inputsInline":true,"output":"Number","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_RANDOM_INT_TOOLTIP}","helpUrl":"%{BKY_MATH_RANDOM_INT_HELPURL}"},{"type":"math_random_float","message0":"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}","output":"Number","colour":"%{BKY_MATH_HUE}","tooltip":"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}","helpUrl":"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"}]);Blockly.Constants.Math.TOOLTIPS_BY_OP={'ADD':'%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}','MINUS':'%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}','MULTIPLY':'%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}','DIVIDE':'%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}','POWER':'%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}','ROOT':'%{BKY_MATH_SINGLE_TOOLTIP_ROOT}','ABS':'%{BKY_MATH_SINGLE_TOOLTIP_ABS}','NEG':'%{BKY_MATH_SINGLE_TOOLTIP_NEG}','LN':'%{BKY_MATH_SINGLE_TOOLTIP_LN}','LOG10':'%{BKY_MATH_SINGLE_TOOLTIP_LOG10}','EXP':'%{BKY_MATH_SINGLE_TOOLTIP_EXP}','POW10':'%{BKY_MATH_SINGLE_TOOLTIP_POW10}','SIN':'%{BKY_MATH_TRIG_TOOLTIP_SIN}','COS':'%{BKY_MATH_TRIG_TOOLTIP_COS}','TAN':'%{BKY_MATH_TRIG_TOOLTIP_TAN}','ASIN':'%{BKY_MATH_TRIG_TOOLTIP_ASIN}','ACOS':'%{BKY_MATH_TRIG_TOOLTIP_ACOS}','ATAN':'%{BKY_MATH_TRIG_TOOLTIP_ATAN}','SUM':'%{BKY_MATH_ONLIST_TOOLTIP_SUM}','MIN':'%{BKY_MATH_ONLIST_TOOLTIP_MIN}','MAX':'%{BKY_MATH_ONLIST_TOOLTIP_MAX}','AVERAGE':'%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}','MEDIAN':'%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}','MODE':'%{BKY_MATH_ONLIST_TOOLTIP_MODE}','STD_DEV':'%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}','RANDOM':'%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}'};Blockly.Extensions.register('math_op_tooltip',Blockly.Extensions.buildTooltipForDropdown('OP',Blockly.Constants.Math.TOOLTIPS_BY_OP));Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var container=document.createElement('mutation');var divisorInput=(this.getFieldValue('PROPERTY')=='DIVISIBLE_BY');container.setAttribute('divisor_input',divisorInput);return container},domToMutation:function(xmlElement){var divisorInput=(xmlElement.getAttribute('divisor_input')=='true');this.updateShape_(divisorInput)},updateShape_:function(divisorInput){var inputExists=this.getInput('DIVISOR');if(divisorInput){if(!inputExists){this.appendValueInput('DIVISOR').setCheck('Number')}}else if(inputExists){this.removeInput('DIVISOR')}}};Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField('PROPERTY').setValidator(function(option){var divisorInput=(option=='DIVISIBLE_BY');this.sourceBlock_.updateShape_(divisorInput)})};Blockly.Extensions.registerMutator('math_is_divisibleby_mutator',Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);Blockly.Extensions.register('math_change_tooltip',Blockly.Extensions.buildTooltipWithFieldText('%{BKY_MATH_CHANGE_TOOLTIP}','VAR'));Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(newOp){if(newOp=='MODE'){this.outputConnection.setCheck('Array')}else{this.outputConnection.setCheck('Number')}},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('op',this.getFieldValue('OP'));return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute('op'))}};Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField('OP').setValidator(function(newOp){this.updateType_(newOp)}.bind(this))};Blockly.Extensions.registerMutator('math_modes_of_list_mutator',Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN,Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);Blockly.Blocks['procedures_defnoreturn']={init:function(){var nameField=new Blockly.FieldTextInput('',Blockly.Procedures.rename);nameField.setSpellcheck(false);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(nameField,'NAME').appendField('','PARAMS');this.setMutator(new Blockly.Mutator(['procedures_mutatorarg']));if((this.workspace.options.comments||(this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments))&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT){this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT)}this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.setStatements_(true);this.statementConnection_=null},setStatements_:function(hasStatements){if(this.hasStatements_===hasStatements){return}if(hasStatements){this.appendStatementInput('STACK').appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO);if(this.getInput('RETURN')){this.moveInputBefore('STACK','RETURN')}}else{this.removeInput('STACK',true)}this.hasStatements_=hasStatements},updateParams_:function(){var badArg=false;var hash={};for(var i=0;i<this.arguments_.length;i++){if(hash['arg_'+this.arguments_[i].toLowerCase()]){badArg=true;break}hash['arg_'+this.arguments_[i].toLowerCase()]=true}if(badArg){this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING)}else{this.setWarningText(null)}var paramString='';if(this.arguments_.length){paramString=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+' '+this.arguments_.join(', ')}Blockly.Events.disable();try{this.setFieldValue(paramString,'PARAMS')}finally{Blockly.Events.enable()}},mutationToDom:function(opt_paramIds){var container=document.createElement('mutation');if(opt_paramIds){container.setAttribute('name',this.getFieldValue('NAME'))}for(var i=0;i<this.argumentVarModels_.length;i++){var parameter=document.createElement('arg');var argModel=this.argumentVarModels_[i];parameter.setAttribute('name',argModel.name);parameter.setAttribute('varId',argModel.getId());if(opt_paramIds&&this.paramIds_){parameter.setAttribute('paramId',this.paramIds_[i])}container.appendChild(parameter)}if(!this.hasStatements_){container.setAttribute('statements','false')}return container},domToMutation:function(xmlElement){this.arguments_=[];this.argumentVarModels_=[];for(var i=0,childNode;childNode=xmlElement.childNodes[i];i++){if(childNode.nodeName.toLowerCase()=='arg'){var varName=childNode.getAttribute('name');var varId=childNode.getAttribute('varId');this.arguments_.push(varName);var variable=Blockly.Variables.getOrCreateVariablePackage(this.workspace,varId,varName,'');this.argumentVarModels_.push(variable)}}this.updateParams_();Blockly.Procedures.mutateCallers(this);this.setStatements_(xmlElement.getAttribute('statements')!=='false')},decompose:function(workspace){var containerBlock=workspace.newBlock('procedures_mutatorcontainer');containerBlock.initSvg();if(this.getInput('RETURN')){containerBlock.setFieldValue(this.hasStatements_?'TRUE':'FALSE','STATEMENTS')}else{containerBlock.getInput('STATEMENT_INPUT').setVisible(false)}var connection=containerBlock.getInput('STACK').connection;for(var i=0;i<this.arguments_.length;i++){var paramBlock=workspace.newBlock('procedures_mutatorarg');paramBlock.initSvg();paramBlock.setFieldValue(this.arguments_[i],'NAME');paramBlock.oldLocation=i;connection.connect(paramBlock.previousConnection);connection=paramBlock.nextConnection}Blockly.Procedures.mutateCallers(this);return containerBlock},compose:function(containerBlock){this.arguments_=[];this.paramIds_=[];this.argumentVarModels_=[];var paramBlock=containerBlock.getInputTargetBlock('STACK');while(paramBlock){var varName=paramBlock.getFieldValue('NAME');this.arguments_.push(varName);var variable=this.workspace.getVariable(varName,'');this.argumentVarModels_.push(variable);this.paramIds_.push(paramBlock.id);paramBlock=paramBlock.nextConnection&&paramBlock.nextConnection.targetBlock()}this.updateParams_();Blockly.Procedures.mutateCallers(this);var hasStatements=containerBlock.getFieldValue('STATEMENTS');if(hasStatements!==null){hasStatements=hasStatements=='TRUE';if(this.hasStatements_!=hasStatements){if(hasStatements){this.setStatements_(true);Blockly.Mutator.reconnect(this.statementConnection_,this,'STACK');this.statementConnection_=null}else{var stackConnection=this.getInput('STACK').connection;this.statementConnection_=stackConnection.targetConnection;if(this.statementConnection_){var stackBlock=stackConnection.targetBlock();stackBlock.unplug();stackBlock.bumpNeighbours_()}this.setStatements_(false)}}}},getProcedureDef:function(){return[this.getFieldValue('NAME'),this.arguments_,false]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(oldId,newId){var oldVariable=this.workspace.getVariableById(oldId);if(oldVariable.type!=''){return}var oldName=oldVariable.name;var newVar=this.workspace.getVariableById(newId);var change=false;for(var i=0;i<this.argumentVarModels_.length;i++){if(this.argumentVarModels_[i].getId()==oldId){this.arguments_[i]=newVar.name;this.argumentVarModels_[i]=newVar;change=true}}if(change){this.displayRenamedVar_(oldName,newVar.name)}},updateVarName:function(variable){var newName=variable.name;var change=false;for(var i=0;i<this.argumentVarModels_.length;i++){if(this.argumentVarModels_[i].getId()==variable.getId()){var oldName=this.arguments_[i];this.arguments_[i]=newName;change=true}}if(change){this.displayRenamedVar_(oldName,newName)}},displayRenamedVar_:function(oldName,newName){this.updateParams_();if(this.mutator.isVisible()){var blocks=this.mutator.workspace_.getAllBlocks();for(var i=0,block;block=blocks[i];i++){if(block.type=='procedures_mutatorarg'&&Blockly.Names.equals(oldName,block.getFieldValue('NAME'))){block.setFieldValue(newName,'NAME')}}}},customContextMenu:function(options){if(this.isInFlyout){return}var option={enabled:true};var name=this.getFieldValue('NAME');option.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace('%1',name);var xmlMutation=goog.dom.createDom('mutation');xmlMutation.setAttribute('name',name);for(var i=0;i<this.arguments_.length;i++){var xmlArg=goog.dom.createDom('arg');xmlArg.setAttribute('name',this.arguments_[i]);xmlMutation.appendChild(xmlArg)}var xmlBlock=goog.dom.createDom('block',null,xmlMutation);xmlBlock.setAttribute('type',this.callType_);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option);if(!this.isCollapsed()){for(var i=0;i<this.argumentVarModels_.length;i++){var option={enabled:true};var argVar=this.argumentVarModels_[i];var name=argVar.name;option.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace('%1',name);var xmlField=Blockly.Variables.generateVariableFieldDom(argVar);var xmlBlock=goog.dom.createDom('block',null,xmlField);xmlBlock.setAttribute('type','variables_get');option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}}},callType_:'procedures_callnoreturn'};Blockly.Blocks['procedures_defreturn']={init:function(){var nameField=new Blockly.FieldTextInput('',Blockly.Procedures.rename);nameField.setSpellcheck(false);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(nameField,'NAME').appendField('','PARAMS');this.appendValueInput('RETURN').setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setMutator(new Blockly.Mutator(['procedures_mutatorarg']));if((this.workspace.options.comments||(this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments))&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT){this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT)}this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.setStatements_(true);this.statementConnection_=null},setStatements_:Blockly.Blocks['procedures_defnoreturn'].setStatements_,updateParams_:Blockly.Blocks['procedures_defnoreturn'].updateParams_,mutationToDom:Blockly.Blocks['procedures_defnoreturn'].mutationToDom,domToMutation:Blockly.Blocks['procedures_defnoreturn'].domToMutation,decompose:Blockly.Blocks['procedures_defnoreturn'].decompose,compose:Blockly.Blocks['procedures_defnoreturn'].compose,getProcedureDef:function(){return[this.getFieldValue('NAME'),this.arguments_,true]},getVars:Blockly.Blocks['procedures_defnoreturn'].getVars,getVarModels:Blockly.Blocks['procedures_defnoreturn'].getVarModels,renameVarById:Blockly.Blocks['procedures_defnoreturn'].renameVarById,updateVarName:Blockly.Blocks['procedures_defnoreturn'].updateVarName,displayRenamedVar_:Blockly.Blocks['procedures_defnoreturn'].displayRenamedVar_,customContextMenu:Blockly.Blocks['procedures_defnoreturn'].customContextMenu,callType_:'procedures_callreturn'};Blockly.Blocks['procedures_mutatorcontainer']={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput('STACK');this.appendDummyInput('STATEMENT_INPUT').appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox('TRUE'),'STATEMENTS');this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=false}};Blockly.Blocks['procedures_mutatorarg']={init:function(){var field=new Blockly.FieldTextInput('x',this.validator_);field.oldShowEditorFn_=field.showEditor_;var newShowEditorFn=function(){this.createdVariables_=[];this.oldShowEditorFn_()};field.showEditor_=newShowEditorFn;this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(field,'NAME');this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=false;field.onFinishEditing_=this.deleteIntermediateVars_;field.createdVariables_=[];field.onFinishEditing_('x')},validator_:function(varName){var outerWs=Blockly.Mutator.findParentWs(this.sourceBlock_.workspace);varName=varName.replace(/[\s\xa0]+/g,' ').replace(/^ | $/g,'');if(!varName){return null}var model=outerWs.getVariable(varName,'');if(model&&model.name!=varName){outerWs.renameVarById(model.getId(),varName)}if(!model){model=outerWs.createVariable(varName,'');if(model&&this.createdVariables_){this.createdVariables_.push(model)}}return varName},deleteIntermediateVars_:function(newText){var outerWs=Blockly.Mutator.findParentWs(this.sourceBlock_.workspace);if(!outerWs){return}for(var i=0;i<this.createdVariables_.length;i++){var model=this.createdVariables_[i];if(model.name!=newText){outerWs.deleteVariableById(model.getId())}}}};Blockly.Blocks['procedures_callnoreturn']={init:function(){this.appendDummyInput('TOPROW').appendField(this.id,'NAME');this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:function(){return(this.getFieldValue('NAME'))},renameProcedure:function(oldName,newName){if(Blockly.Names.equals(oldName,this.getProcedureCall())){this.setFieldValue(newName,'NAME');var baseMsg=this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP;this.setTooltip(baseMsg.replace('%1',newName))}},setProcedureParameters_:function(paramNames,paramIds){var defBlock=Blockly.Procedures.getDefinition(this.getProcedureCall(),this.workspace);var mutatorOpen=defBlock&&defBlock.mutator&&defBlock.mutator.isVisible();if(!mutatorOpen){this.quarkConnections_={};this.quarkIds_=null}if(!paramIds){return}if(goog.array.equals(this.arguments_,paramNames)){this.quarkIds_=paramIds;return}if(paramIds.length!=paramNames.length){throw'Error: paramNames and paramIds must be the same length.';}this.setCollapsed(false);if(!this.quarkIds_){this.quarkConnections_={};if(paramNames.join('\n')==this.arguments_.join('\n')){this.quarkIds_=paramIds}else{this.quarkIds_=[]}}var savedRendered=this.rendered;this.rendered=false;for(var i=0;i<this.arguments_.length;i++){var input=this.getInput('ARG'+i);if(input){var connection=input.connection.targetConnection;this.quarkConnections_[this.quarkIds_[i]]=connection;if(mutatorOpen&&connection&&paramIds.indexOf(this.quarkIds_[i])==-1){connection.disconnect();connection.getSourceBlock().bumpNeighbours_()}}}this.arguments_=[].concat(paramNames);this.argumentVarModels_=[];for(var i=0;i<this.arguments_.length;i++){var variable=Blockly.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[i],'');this.argumentVarModels_.push(variable)}this.updateShape_();this.quarkIds_=paramIds;if(this.quarkIds_){for(var i=0;i<this.arguments_.length;i++){var quarkId=this.quarkIds_[i];if(quarkId in this.quarkConnections_){var connection=this.quarkConnections_[quarkId];if(!Blockly.Mutator.reconnect(connection,this,'ARG'+i)){delete this.quarkConnections_[quarkId]}}}}this.rendered=savedRendered;if(this.rendered){this.render()}},updateShape_:function(){for(var i=0;i<this.arguments_.length;i++){var field=this.getField('ARGNAME'+i);if(field){Blockly.Events.disable();try{field.setValue(this.arguments_[i])}finally{Blockly.Events.enable()}}else{field=new Blockly.FieldLabel(this.arguments_[i]);var input=this.appendValueInput('ARG'+i).setAlign(Blockly.ALIGN_RIGHT).appendField(field,'ARGNAME'+i);input.init()}}while(this.getInput('ARG'+i)){this.removeInput('ARG'+i);i++}var topRow=this.getInput('TOPROW');if(topRow){if(this.arguments_.length){if(!this.getField('WITH')){topRow.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,'WITH');topRow.init()}}else{if(this.getField('WITH')){topRow.removeField('WITH')}}}},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('name',this.getProcedureCall());for(var i=0;i<this.arguments_.length;i++){var parameter=document.createElement('arg');parameter.setAttribute('name',this.arguments_[i]);container.appendChild(parameter)}return container},domToMutation:function(xmlElement){var name=xmlElement.getAttribute('name');this.renameProcedure(this.getProcedureCall(),name);var args=[];var paramIds=[];for(var i=0,childNode;childNode=xmlElement.childNodes[i];i++){if(childNode.nodeName.toLowerCase()=='arg'){args.push(childNode.getAttribute('name'));paramIds.push(childNode.getAttribute('paramId'))}}this.setProcedureParameters_(args,paramIds)},getVarModels:function(){return this.argumentVarModels_},onchange:function(event){if(!this.workspace||this.workspace.isFlyout){return}if(event.type==Blockly.Events.BLOCK_CREATE&&event.ids.indexOf(this.id)!=-1){var name=this.getProcedureCall();var def=Blockly.Procedures.getDefinition(name,this.workspace);if(def&&(def.type!=this.defType_||JSON.stringify(def.arguments_)!=JSON.stringify(this.arguments_))){def=null}if(!def){Blockly.Events.setGroup(event.group);var xml=goog.dom.createDom('xml');var block=goog.dom.createDom('block');block.setAttribute('type',this.defType_);var xy=this.getRelativeToSurfaceXY();var x=xy.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1);var y=xy.y+Blockly.SNAP_RADIUS*2;block.setAttribute('x',x);block.setAttribute('y',y);var mutation=this.mutationToDom();block.appendChild(mutation);var field=goog.dom.createDom('field');field.setAttribute('name','NAME');field.appendChild(document.createTextNode(this.getProcedureCall()));block.appendChild(field);xml.appendChild(block);Blockly.Xml.domToWorkspace(xml,this.workspace);Blockly.Events.setGroup(false)}}else if(event.type==Blockly.Events.BLOCK_DELETE){var name=this.getProcedureCall();var def=Blockly.Procedures.getDefinition(name,this.workspace);if(!def){Blockly.Events.setGroup(event.group);this.dispose(true,false);Blockly.Events.setGroup(false)}}},customContextMenu:function(options){var option={enabled:true};option.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var name=this.getProcedureCall();var workspace=this.workspace;option.callback=function(){var def=Blockly.Procedures.getDefinition(name,workspace);if(def){workspace.centerOnBlock(def.id);def.select()}};options.push(option)},defType_:'procedures_defnoreturn'};Blockly.Blocks['procedures_callreturn']={init:function(){this.appendDummyInput('TOPROW').appendField('','NAME');this.setOutput(true);this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:Blockly.Blocks['procedures_callnoreturn'].getProcedureCall,renameProcedure:Blockly.Blocks['procedures_callnoreturn'].renameProcedure,setProcedureParameters_:Blockly.Blocks['procedures_callnoreturn'].setProcedureParameters_,updateShape_:Blockly.Blocks['procedures_callnoreturn'].updateShape_,mutationToDom:Blockly.Blocks['procedures_callnoreturn'].mutationToDom,domToMutation:Blockly.Blocks['procedures_callnoreturn'].domToMutation,getVarModels:Blockly.Blocks['procedures_callnoreturn'].getVarModels,onchange:Blockly.Blocks['procedures_callnoreturn'].onchange,customContextMenu:Blockly.Blocks['procedures_callnoreturn'].customContextMenu,defType_:'procedures_defreturn'};Blockly.Blocks['procedures_ifreturn']={init:function(){this.appendValueInput('CONDITION').setCheck('Boolean').appendField(Blockly.Msg.CONTROLS_IF_MSG_IF);this.appendValueInput('VALUE').appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setColour(Blockly.Msg.PROCEDURES_HUE);this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP);this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL);this.hasReturnValue_=true},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('value',Number(this.hasReturnValue_));return container},domToMutation:function(xmlElement){var value=xmlElement.getAttribute('value');this.hasReturnValue_=(value==1);if(!this.hasReturnValue_){this.removeInput('VALUE');this.appendDummyInput('VALUE').appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN)}},onchange:function(){if(!this.workspace.isDragging||this.workspace.isDragging()){return}var legal=false;var block=this;do{if(this.FUNCTION_TYPES.indexOf(block.type)!=-1){legal=true;break}block=block.getSurroundParent()}while(block);if(legal){if(block.type=='procedures_defnoreturn'&&this.hasReturnValue_){this.removeInput('VALUE');this.appendDummyInput('VALUE').appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.hasReturnValue_=false}else if(block.type=='procedures_defreturn'&&!this.hasReturnValue_){this.removeInput('VALUE');this.appendValueInput('VALUE').appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN);this.hasReturnValue_=true}this.setWarningText(null);if(!this.isInFlyout){this.setDisabled(false)}}else{this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING);if(!this.isInFlyout&&!this.getInheritedDisabled()){this.setDisabled(true)}}},FUNCTION_TYPES:['procedures_defnoreturn','procedures_defreturn']};Blockly.defineBlocksWithJsonArray([{"type":"rotcode_at","message0":"@QQ号为 %1 %2 的人，at后 %3 空格","args0":[{"type":"input_dummy"},{"type":"input_value","name":"QQID","check":["String","Number"],"align":"RIGHT"},{"type":"field_dropdown","name":"isNoSpace","options":[["加","false"],["不加","true"]]}],"inputsInline":true,"output":"String","colour":"%{BKY_ROTCODE_HUE}","tooltip":"输出at指定QQ的动态码","helpUrl":""},{"type":"rotcode_shake","message0":"窗口抖动(戳一戳)","output":"String","colour":"%{BKY_ROTCODE_HUE}","tooltip":"输出抖动(戳一戳)的动态码","helpUrl":""},{"type":"rotcode_emoji_1","message0":"一部分常用Emoji代码： %1","args0":[{"type":"field_dropdown","name":"emojiid","options":[["😀","128512"],["😁","128513"],["😂","128514"],["😱","128561"],["😒","128530"],["😎","128526"],["😍","128525"],["🙄","128580"],["🤑","129297"],["😝","128541"]]}],"output":"String","colour":"%{BKY_ROTCODE_HUE}","tooltip":"输出emoji表情动态码","helpUrl":""},{"type":"rotcode_sface_1","message0":"QQ小表情编码： %1","args0":[{"type":"field_input","name":"sfaceid","text":"0"}],"output":"String","colour":"%{BKY_ROTCODE_HUE}","tooltip":"输出qq表情动态码","helpUrl":""},{"type":"rotcode_record","message0":"发送语音 %1 %2 音频文件名 %3","args0":[{"type":"field_dropdown","name":"magic","options":[["添加「变声」标记","true"],["不添加「变声」标记","false"]]},{"type":"input_dummy"},{"type":"input_value","name":"filename","check":"String","align":"RIGHT"}],"output":"String","colour":"%{BKY_ROTCODE_HUE}","tooltip":"输出发送语音的动态码，「音频文件名」需存放在机器人目录的「data\\record\\」下。","helpUrl":""}]);Blockly.defineBlocksWithJsonArray([{"type":"rotevent_allevent","lastDummyAlign0":"RIGHT","message0":"创建机器人事件 响应 %1 %2 将消息 %3","args0":[{"type":"input_value","name":"eventTypeInput","check":"ROTEvent"},{"type":"input_statement","name":"action","check":"Action"},{"type":"field_dropdown","name":"dispose","options":[["拦截","1"],["忽略","0"]]}],"colour":"%{BKY_ROTEVENT_HUE}","tooltip":"机器人收到群消息会调用本函数","helpUrl":""}]);Blockly.Blocks.event_rotqq={init:function(){this.appendDummyInput().appendField("机器人QQ");this.setOutput(true,"String");this.setColour(210);this.setTooltip("收到该消息的机器人QQ")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_time={init:function(){this.appendDummyInput().appendField("收到消息的时间(时间戳)");this.setOutput(true,"String");this.setColour(210);this.setTooltip("收到消息时的时间")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_msgtype={init:function(){this.appendDummyInput('content').appendField("消息类型");this.setOutput(true,"String");this.setColour(210);this.setTooltip("相应的消息类型")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{switch(c.inputList[0].connection.targetBlock().getFieldValue("event_type")){case"ROTPrivateMsg":this.removeInput('content');this.appendDummyInput('content').appendField("私聊消息类型(详细请悬浮查看)");this.setTooltip("1/来自好友 2/来自群 3/来自讨论组 4/来自在线状态");break;case"ROTGroupMsg":this.removeInput('content');this.appendDummyInput('content').appendField("消息类型(群聊暂时没有用)");this.setTooltip("群聊暂时没有用");break;case"ROTDiscussMsg":this.removeInput('content');this.appendDummyInput('content').appendField("消息类型(讨论组暂时没有用)");this.setTooltip("讨论组暂时没有用");break;default:this.removeInput('content');this.appendDummyInput('content').appendField("私聊消息类型");this.setTooltip("相应的消息类型");break}if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_msgid={init:function(){this.appendDummyInput().appendField("消息ID(用于撤回/回复)");this.setOutput(true,"String");this.setColour(210);this.setTooltip("酷Q输出消息ID，IR输出消息ID")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_msgnum={init:function(){this.appendDummyInput().appendField("消息序号(用于撤回/回复)");this.setOutput(true,"String");this.setColour(210);this.setTooltip("酷Q恒为0，IR输出消息序号")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_msgfrom={init:function(){this.appendDummyInput('content').appendField("消息来源");this.setOutput(true,"String");this.setColour(210);this.setTooltip("私聊: 消息类型不为1时返回群号或讨论组号\n群聊或讨论组: 返回群号或讨论组号")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{switch(c.inputList[0].connection.targetBlock().getFieldValue("event_type")){case"ROTPrivateMsg":this.removeInput('content');this.appendDummyInput('content').appendField("消息来源");this.setTooltip("私聊: 消息类型不为1时返回群号或讨论组号");break;case"ROTGroupMsg":this.removeInput('content');this.appendDummyInput('content').appendField("消息来源群");this.setTooltip("群聊: 返回群号");break;case"ROTDiscussMsg":this.removeInput('content');this.appendDummyInput('content').appendField("消息来源讨论组");this.setTooltip("讨论组: 返回讨论组号");break;default:this.removeInput('content');this.appendDummyInput('content').appendField("消息来源");this.setTooltip("私聊: 消息类型不为1时返回群号或讨论组号\n群聊或讨论组: 返回群号或讨论组号");break}if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_person={init:function(){this.appendDummyInput().appendField("消息发送者");this.setOutput(true,"String");this.setColour(210);this.setTooltip("发送该消息的人(QQ号)")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_msg={init:function(){this.appendDummyInput().appendField("消息内容");this.setOutput(true,"String");this.setColour(210);this.setTooltip("消息的具体内容")},onchange:function(b){var a=false;var c=this;do{if(c.getInput("eventTypeInput")!=null){try{if(this.EVENT_TYPES.indexOf(c.inputList[0].connection.targetBlock().getFieldValue("event_type"))!=-1){a=true;break}}catch(b){}}c=c.getSurroundParent()}while(c);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.Msg.EVENT_ROTEVENT_WARNING)}},EVENT_TYPES:["ROTGroupMsg","ROTPrivateMsg","ROTDiscussMsg"]};Blockly.Blocks.event_rotsys={init:function(){this.appendDummyInput().appendField("机器人").appendField(new Blockly.FieldDropdown([["收到群消息","ROTGroupMsg"],["收到私聊消息","ROTPrivateMsg"],["收到讨论组消息","ROTDiscussMsg"],]),"event_type");this.setOutput(true,"ROTEvent");this.setColour(210);this.setTooltip("机器人相关的事件")}};var thisBlock,isQQ;Blockly.Constants.rotfunc.HUE=Blockly.Msg["ROTFUNC_HUE"];Blockly.Blocks.rotfunc.HUE=Blockly.Constants.rotfunc.HUE;Blockly.defineBlocksWithJsonArray([{"type":"rot_sendmsg","message0":"机器人_发送 %1 消息 %2 机器人QQ %3 号码 %4 消息内容 %5","args0":[{"type":"field_dropdown","name":"type","options":[["群","group"],["私聊","private"],["讨论组","discuss"]]},{"type":"input_dummy","align":"RIGHT"},{"type":"input_value","name":"rotqq","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"idnumber","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"msg","check":"String","align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"发送各类QQ消息","helpUrl":""},{"type":"rot_sendlike","message0":"发送赞 %1 机器人QQ %2 号码 %3 次数 %4","args0":[{"type":"input_dummy"},{"type":"input_value","name":"rotqq","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"idnumber","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"times","check":["Number","String"],"align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"向指定QQ发送赞，最多10次","helpUrl":""},{"type":"rot_addlog","message0":"输出 %1 日志 %2 日志内容 %3","args0":[{"type":"field_dropdown","name":"type","options":[["信息","info"],["调试","debug"],["警告","warning"]]},{"type":"input_dummy"},{"type":"input_value","name":"content","check":"String","align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"输出各类型的日志，方便调试","helpUrl":""},{"type":"rot_jinyan","message0":"禁言指定Q号 %1 机器人QQ %2 群号 %3 Q号 %4 时长(秒) %5","args0":[{"type":"input_dummy","align":"RIGHT"},{"type":"input_value","name":"rotqq","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"groupnumber","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"idnumber","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"time","check":["Number","String"],"align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"禁言指定QQ号，时间单位为秒。如果时间为0则为解禁。本参数无返回值","helpUrl":""},{"type":"rot_getgrouplist","lastDummyAlign0":"RIGHT","message0":"获取机器人加的所有群 %1 机器人QQ %2","args0":[{"type":"input_dummy","align":"RIGHT"},{"type":"input_value","name":"rotqq","check":["Number","String"],"align":"RIGHT"}],"inputsInline":false,"output":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"输出机器人所加的所有群，格式为“xxxxxxx|xxxxxxx|xxxxxxx”","helpUrl":""},{"type":"rot_deleteMsg","message0":"撤回指定消息 %1 机器人QQ %2 消息ID %3 消息序号 %4","args0":[{"type":"input_dummy"},{"type":"input_value","name":"rotqq","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"msgid","check":["Number","String"],"align":"RIGHT"},{"type":"input_value","name":"msgnum","check":["Number","String"],"align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_ROTFUNC_HUE}","tooltip":"撤回指定消息","helpUrl":""}]);Blockly.Blocks['rot_getusername']={init:function(){this.appendDummyInput().appendField("获取").appendField(new Blockly.FieldDropdown([["QQ","qq"]],function(value){var newQQ=(value=='qq');var block=this.sourceBlock_;block.updateAt_(newQQ);block.setFieldValue(value,'type');return null}),"type");this.appendValueInput("number").setCheck(["Number","String"]).setAlign(Blockly.ALIGN_RIGHT);this.appendDummyInput('content').appendField("的昵称");this.setInputsInline(true);this.setOutput(true,null);this.setColour(Blockly.Blocks.rotfunc.HUE);this.setTooltip("根据号码输出昵称，如果没有获取到则返回空");this.setHelpUrl("");thisBlock=this},mutationToDom:function(){var container=document.createElement('mutation');var isQQ=this.getFieldValue('type')=="qq";container.setAttribute('type',isQQ);return container},domToMutation:function(xmlElement){var isTTSC=(xmlElement.getAttribute('type')!='false');this.updateAt_(isTTSC)},updateAt_:function(isQQ){this.removeInput('content');if(isQQ){this.appendDummyInput('content').appendField("的昵称")}else{this.appendDummyInput('content').appendField("的群名称")}}};Blockly.defineBlocksWithJsonArray([{"type":"sysdisk_getlocalpath","message0":"获取酷Q运行目录","output":null,"colour":"%{BKY_SYSDISK_HUE}","tooltip":"输出酷Q目录，末尾不带 /","helpUrl":""},{"type":"sysdisk_writefile","message0":"磁盘_写文件 %1 完整路径 %2 文件内容 %3","args0":[{"type":"input_dummy"},{"type":"input_value","name":"filepath","check":"String","align":"RIGHT"},{"type":"input_value","name":"filecontent","check":"String","align":"RIGHT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_SYSDISK_HUE}","tooltip":"将文本写入本地文件","helpUrl":""},{"type":"sysdisk_readfile","message0":"磁盘_读文件 %1 完整路径 %2","args0":[{"type":"input_dummy"},{"type":"input_value","name":"filepath","check":"String","align":"RIGHT"}],"output":null,"colour":"%{BKY_SYSDISK_HUE}","tooltip":"从本地读取文件内容","helpUrl":""}]);Blockly.Constants.Text.HUE=160;Blockly.defineBlocksWithJsonArray([{"type":"text","message0":"%1","args0":[{"type":"field_input","name":"TEXT","text":""}],"output":"String","colour":"%{BKY_TEXTS_HUE}","helpUrl":"%{BKY_TEXT_TEXT_HELPURL}","tooltip":"%{BKY_TEXT_TEXT_TOOLTIP}","extensions":["text_quotes","parent_tooltip_when_inline"]},{"type":"text_join","message0":"","output":"String","colour":"%{BKY_TEXTS_HUE}","helpUrl":"%{BKY_TEXT_JOIN_HELPURL}","tooltip":"%{BKY_TEXT_JOIN_TOOLTIP}","mutator":"text_join_mutator"},{"type":"text_create_join_container","message0":"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2","args0":[{"type":"input_dummy"},{"type":"input_statement","name":"STACK"}],"colour":"%{BKY_TEXTS_HUE}","tooltip":"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}","enableContextMenu":false},{"type":"text_create_join_item","message0":"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}","previousStatement":null,"nextStatement":null,"colour":"%{BKY_TEXTS_HUE}","tooltip":"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}","enableContextMenu":false},{"type":"text_append","message0":"%{BKY_TEXT_APPEND_TITLE}","args0":[{"type":"field_variable","name":"VAR","variable":"%{BKY_TEXT_APPEND_VARIABLE}"},{"type":"input_value","name":"TEXT"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_TEXTS_HUE}","extensions":["text_append_tooltip"]},{"type":"text_length","message0":"%{BKY_TEXT_LENGTH_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":['String','Array']}],"output":'Number',"colour":"%{BKY_TEXTS_HUE}","tooltip":"%{BKY_TEXT_LENGTH_TOOLTIP}","helpUrl":"%{BKY_TEXT_LENGTH_HELPURL}"},{"type":"text_isEmpty","message0":"%{BKY_TEXT_ISEMPTY_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":['String','Array']}],"output":'Boolean',"colour":"%{BKY_TEXTS_HUE}","tooltip":"%{BKY_TEXT_ISEMPTY_TOOLTIP}","helpUrl":"%{BKY_TEXT_ISEMPTY_HELPURL}"},{"type":"text_indexOf","message0":"%{BKY_TEXT_INDEXOF_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":"String"},{"type":"field_dropdown","name":"END","options":[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{"type":"input_value","name":"FIND","check":"String"}],"output":"Number","colour":"%{BKY_TEXTS_HUE}","helpUrl":"%{BKY_TEXT_INDEXOF_HELPURL}","inputsInline":true,"extensions":["text_indexOf_tooltip"]},{"type":"text_charAt","message0":"%{BKY_TEXT_CHARAT_TITLE}","args0":[{"type":"input_value","name":"VALUE","check":"String"},{"type":"field_dropdown","name":"WHERE","options":[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],"output":"String","colour":"%{BKY_TEXTS_HUE}","helpUrl":"%{BKY_TEXT_CHARAT_HELPURL}","inputsInline":true,"mutator":"text_charAt_mutator"},{"type":"text_enter","message0":"换行","output":"String","colour":"%{BKY_TEXTS_HUE}","tooltip":"返回换行符文本","helpUrl":""}]);Blockly.Blocks['text_getSubstring']={init:function(){this['WHERE_OPTIONS_1']=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,'FROM_START'],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,'FROM_END'],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,'FIRST']];this['WHERE_OPTIONS_2']=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,'FROM_START'],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,'FROM_END'],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,'LAST']];this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setColour(Blockly.Msg.TEXTS_HUE);this.appendValueInput('STRING').setCheck('String').appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput('AT1');this.appendDummyInput('AT2');if(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL){this.appendDummyInput('TAIL').appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL)}this.setInputsInline(true);this.setOutput(true,'String');this.updateAt_(1,true);this.updateAt_(2,true);this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var container=document.createElement('mutation');var isAt1=this.getInput('AT1').type==Blockly.INPUT_VALUE;container.setAttribute('at1',isAt1);var isAt2=this.getInput('AT2').type==Blockly.INPUT_VALUE;container.setAttribute('at2',isAt2);return container},domToMutation:function(xmlElement){var isAt1=(xmlElement.getAttribute('at1')=='true');var isAt2=(xmlElement.getAttribute('at2')=='true');this.updateAt_(1,isAt1);this.updateAt_(2,isAt2)},updateAt_:function(n,isAt){this.removeInput('AT'+n);this.removeInput('ORDINAL'+n,true);if(isAt){this.appendValueInput('AT'+n).setCheck('Number');if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX){this.appendDummyInput('ORDINAL'+n).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}}else{this.appendDummyInput('AT'+n)}if(n==2&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL){this.removeInput('TAIL',true);this.appendDummyInput('TAIL').appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL)}var menu=new Blockly.FieldDropdown(this['WHERE_OPTIONS_'+n],function(value){var newAt=(value=='FROM_START')||(value=='FROM_END');if(newAt!=isAt){var block=this.sourceBlock_;block.updateAt_(n,newAt);block.setFieldValue(value,'WHERE'+n);return null}return undefined});this.getInput('AT'+n).appendField(menu,'WHERE'+n);if(n==1){this.moveInputBefore('AT1','AT2');if(this.getInput('ORDINAL1')){this.moveInputBefore('ORDINAL1','AT2')}}}};Blockly.Blocks['text_changeCase']={init:function(){var OPERATORS=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,'UPPERCASE'],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,'LOWERCASE'],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,'TITLECASE']];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL);this.setColour(Blockly.Msg.TEXTS_HUE);this.appendValueInput('TEXT').setCheck('String').appendField(new Blockly.FieldDropdown(OPERATORS),'CASE');this.setOutput(true,'String');this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}};Blockly.Blocks['text_trim']={init:function(){var OPERATORS=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,'BOTH'],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,'LEFT'],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,'RIGHT']];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL);this.setColour(Blockly.Msg.TEXTS_HUE);this.appendValueInput('TEXT').setCheck('String').appendField(new Blockly.FieldDropdown(OPERATORS),'MODE');this.setOutput(true,'String');this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}};Blockly.Blocks['text_print']={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_PRINT_TITLE,"args0":[{"type":"input_value","name":"TEXT"}],"previousStatement":null,"nextStatement":null,"colour":Blockly.Msg.TEXTS_HUE,"tooltip":Blockly.Msg.TEXT_PRINT_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_PRINT_HELPURL})}};Blockly.Blocks['text_prompt_ext']={init:function(){var TYPES=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,'TEXT'],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,'NUMBER']];this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Msg.TEXTS_HUE);var thisBlock=this;var dropdown=new Blockly.FieldDropdown(TYPES,function(newOp){thisBlock.updateType_(newOp)});this.appendValueInput('TEXT').appendField(dropdown,'TYPE');this.setOutput(true,'String');this.setTooltip(function(){return(thisBlock.getFieldValue('TYPE')=='TEXT')?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(newOp){this.outputConnection.setCheck(newOp=='NUMBER'?'Number':'String')},mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('type',this.getFieldValue('TYPE'));return container},domToMutation:function(xmlElement){this.updateType_(xmlElement.getAttribute('type'))}};Blockly.Blocks['text_prompt']={init:function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);var TYPES=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,'TEXT'],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,'NUMBER']];var thisBlock=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL);this.setColour(Blockly.Msg.TEXTS_HUE);var dropdown=new Blockly.FieldDropdown(TYPES,function(newOp){thisBlock.updateType_(newOp)});this.appendDummyInput().appendField(dropdown,'TYPE').appendField(this.newQuote_(true)).appendField(new Blockly.FieldTextInput(''),'TEXT').appendField(this.newQuote_(false));this.setOutput(true,'String');this.setTooltip(function(){return(thisBlock.getFieldValue('TYPE')=='TEXT')?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:Blockly.Blocks['text_prompt_ext'].updateType_,mutationToDom:Blockly.Blocks['text_prompt_ext'].mutationToDom,domToMutation:Blockly.Blocks['text_prompt_ext'].domToMutation};Blockly.Blocks['text_count']={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_COUNT_MESSAGE0,"args0":[{"type":"input_value","name":"SUB","check":"String"},{"type":"input_value","name":"TEXT","check":"String"}],"output":"Number","inputsInline":true,"colour":Blockly.Msg.TEXTS_HUE,"tooltip":Blockly.Msg.TEXT_COUNT_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_COUNT_HELPURL})}};Blockly.Blocks['text_replace']={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_REPLACE_MESSAGE0,"args0":[{"type":"input_value","name":"FROM","check":"String"},{"type":"input_value","name":"TO","check":"String"},{"type":"input_value","name":"TEXT","check":"String"}],"output":"String","inputsInline":true,"colour":Blockly.Msg.TEXTS_HUE,"tooltip":Blockly.Msg.TEXT_REPLACE_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_REPLACE_HELPURL})}};Blockly.Blocks['text_reverse']={init:function(){this.jsonInit({"message0":Blockly.Msg.TEXT_REVERSE_MESSAGE0,"args0":[{"type":"input_value","name":"TEXT","check":"String"}],"output":"String","inputsInline":true,"colour":Blockly.Msg.TEXTS_HUE,"tooltip":Blockly.Msg.TEXT_REVERSE_TOOLTIP,"helpUrl":Blockly.Msg.TEXT_REVERSE_HELPURL})}};Blockly.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC',QUOTE_IMAGE_RIGHT_DATAURI:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==',QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(fieldName){for(var i=0,input;input=this.inputList[i];i++){for(var j=0,field;field=input.fieldRow[j];j++){if(fieldName==field.name){input.insertFieldAt(j,this.newQuote_(true));input.insertFieldAt(j+2,this.newQuote_(false));return}}}console.warn('field named "'+fieldName+'" not found in '+this.toDevString())},newQuote_:function(open){var isLeft=this.RTL?!open:open;var dataUri=isLeft?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI;return new Blockly.FieldImage(dataUri,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,isLeft?'\u201C':'\u201D')}};Blockly.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);this.quoteField_('TEXT')};Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('items',this.itemCount_);return container},domToMutation:function(xmlElement){this.itemCount_=parseInt(xmlElement.getAttribute('items'),10);this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock('text_create_join_container');containerBlock.initSvg();var connection=containerBlock.getInput('STACK').connection;for(var i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock('text_create_join_item');itemBlock.initSvg();connection.connect(itemBlock.previousConnection);connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock('STACK');var connections=[];while(itemBlock){connections.push(itemBlock.valueConnection_);itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}for(var i=0;i<this.itemCount_;i++){var connection=this.getInput('ADD'+i).connection.targetConnection;if(connection&&connections.indexOf(connection)==-1){connection.disconnect()}}this.itemCount_=connections.length;this.updateShape_();for(var i=0;i<this.itemCount_;i++){Blockly.Mutator.reconnect(connections[i],this,'ADD'+i)}},saveConnections:function(containerBlock){var itemBlock=containerBlock.getInputTargetBlock('STACK');var i=0;while(itemBlock){var input=this.getInput('ADD'+i);itemBlock.valueConnection_=input&&input.connection.targetConnection;i++;itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){if(this.itemCount_&&this.getInput('EMPTY')){this.removeInput('EMPTY')}else if(!this.itemCount_&&!this.getInput('EMPTY')){this.appendDummyInput('EMPTY').appendField(this.newQuote_(true)).appendField(this.newQuote_(false))}for(var i=0;i<this.itemCount_;i++){if(!this.getInput('ADD'+i)){var input=this.appendValueInput('ADD'+i);if(i==0){input.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH)}}}while(this.getInput('ADD'+i)){this.removeInput('ADD'+i);i++}}};Blockly.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);this.itemCount_=2;this.updateShape_();this.setMutator(new Blockly.Mutator(['text_create_join_item']))};Blockly.Extensions.register('text_append_tooltip',Blockly.Extensions.buildTooltipWithFieldText('%{BKY_TEXT_APPEND_TOOLTIP}','VAR'));Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var thisBlock=this;this.setTooltip(function(){return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace('%1',thisBlock.workspace.options.oneBasedIndex?'0':'-1')})};Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var container=document.createElement('mutation');container.setAttribute('at',!!this.isAt_);return container},domToMutation:function(xmlElement){var isAt=(xmlElement.getAttribute('at')!='false');this.updateAt_(isAt)},updateAt_:function(isAt){this.removeInput('AT',true);this.removeInput('ORDINAL',true);if(isAt){this.appendValueInput('AT').setCheck('Number');if(Blockly.Msg.ORDINAL_NUMBER_SUFFIX){this.appendDummyInput('ORDINAL').appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)}}if(Blockly.Msg.TEXT_CHARAT_TAIL){this.removeInput('TAIL',true);this.appendDummyInput('TAIL').appendField(Blockly.Msg.TEXT_CHARAT_TAIL)}this.isAt_=isAt}};Blockly.Constants.Text.TEXT_CHARAT_EXTENSION=function(){var dropdown=this.getField('WHERE');dropdown.setValidator(function(value){var newAt=(value=='FROM_START')||(value=='FROM_END');if(newAt!=this.isAt_){var block=this.sourceBlock_;block.updateAt_(newAt);block.setFieldValue(value,'WHERE');return null}return undefined});this.updateAt_(true);var thisBlock=this;this.setTooltip(function(){var where=thisBlock.getFieldValue('WHERE');var tooltip=Blockly.Msg.TEXT_CHARAT_TOOLTIP;if(where=='FROM_START'||where=='FROM_END'){var msg=(where=='FROM_START')?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP;if(msg){tooltip+='  '+msg.replace('%1',thisBlock.workspace.options.oneBasedIndex?'#1':'#0')}}return tooltip})};Blockly.Extensions.register('text_indexOf_tooltip',Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);Blockly.Extensions.register('text_quotes',Blockly.Constants.Text.TEXT_QUOTES_EXTENSION);Blockly.Extensions.registerMutator('text_join_mutator',Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_JOIN_EXTENSION);Blockly.Extensions.registerMutator('text_charAt_mutator',Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_CHARAT_EXTENSION);Blockly.Blocks['text_newRE']={init:function(){this.appendValueInput("text").setCheck("String").appendField("创建正则表达式");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"g").appendField("全局匹配").appendField(new Blockly.FieldCheckbox("FALSE"),"i").appendField("忽略大小写").appendField(new Blockly.FieldCheckbox("FALSE"),"m").appendField("多行匹配");this.setInputsInline(true);this.setOutput(true,"RegExp");this.setColour(Blockly.Msg.TEXTS_HUE);this.setTooltip("创建正则表达式");this.setHelpUrl(null);this.setInputsInline(false)}};Blockly.Blocks['text_REtest']={init:function(){this.appendValueInput("tester").setCheck("RegExp").appendField("用正则表达式");this.appendValueInput("testee").setCheck("String").appendField("测试字符串");this.setInputsInline(true);this.setOutput(true,"Boolean");this.setColour(Blockly.Msg.TEXTS_HUE);this.setTooltip("匹配返回true，反之返回false（test代码块）");this.setHelpUrl(null);this.setInputsInline(false)}};Blockly.Blocks['text_REexec']={init:function(){this.appendValueInput("tester").setCheck("RegExp").appendField("用正则表达式");this.appendValueInput("testee").setCheck("String").appendField("匹配字符串");this.setInputsInline(true);this.setOutput(true,"Boolean");this.setColour(Blockly.Msg.TEXTS_HUE);this.setTooltip("返回一个匹配的字符串列表（exec代码块）");this.setHelpUrl(null);this.setInputsInline(false)}};Blockly.defineBlocksWithJsonArray([{"type":"rot_timestamptostr","message0":"10位时间戳转时间 %1 时间戳 %2","args0":[{"type":"input_dummy","align":"RIGHT"},{"type":"input_value","name":"timestamp","check":["Number","String"],"align":"RIGHT"}],"inputsInline":false,"output":"String","colour":"%{BKY_TIME_HUE}","tooltip":"将10位数的时间戳转为文本。输出格式为“2017-11-01 11:11:11”","helpUrl":""}]);Blockly.Constants.Variables.HUE=330;Blockly.defineBlocksWithJsonArray([{"type":"variables_get","message0":"%1","args0":[{"type":"field_variable","name":"VAR","variable":"%{BKY_VARIABLES_DEFAULT_NAME}"}],"output":null,"colour":"%{BKY_VARIABLES_HUE}","helpUrl":"%{BKY_VARIABLES_GET_HELPURL}","tooltip":"%{BKY_VARIABLES_GET_TOOLTIP}","extensions":["contextMenu_variableSetterGetter"]},{"type":"variables_set","message0":"%{BKY_VARIABLES_SET}","args0":[{"type":"field_variable","name":"VAR","variable":"%{BKY_VARIABLES_DEFAULT_NAME}"},{"type":"input_value","name":"VALUE"}],"previousStatement":null,"nextStatement":null,"colour":"%{BKY_VARIABLES_HUE}","tooltip":"%{BKY_VARIABLES_SET_TOOLTIP}","helpUrl":"%{BKY_VARIABLES_SET_HELPURL}","extensions":["contextMenu_variableSetterGetter"]}]);Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(options){if(this.isInFlyout){return}if(this.type=='variables_get'){var opposite_type='variables_set';var contextMenuMsg=Blockly.Msg.VARIABLES_GET_CREATE_SET}else{var opposite_type='variables_get';var contextMenuMsg=Blockly.Msg.VARIABLES_SET_CREATE_GET}var option={enabled:this.workspace.remainingCapacity()>0};var name=this.getField('VAR').getText();option.text=contextMenuMsg.replace('%1',name);var xmlField=goog.dom.createDom('field',null,name);xmlField.setAttribute('name','VAR');var xmlBlock=goog.dom.createDom('block',null,xmlField);xmlBlock.setAttribute('type',opposite_type);option.callback=Blockly.ContextMenu.callbackFactory(this,xmlBlock);options.push(option)}};Blockly.Extensions.registerMixin('contextMenu_variableSetterGetter',Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);Blockly.Constants.voiceera.HUE=Blockly.Msg["VOICEERA_HUE"];Blockly.Blocks.voiceera.HUE=Blockly.Constants.voiceera.HUE;Blockly.Blocks['ve_gettts']={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage("media/voiceera.png",25,20,"*")).appendField("语音时代_语音合成");this.appendValueInput("content").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("合成内容");this.appendValueInput("ttsgroup").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outtts"],["内置","intts"]],function(value){var newTTSC=(value=='outtts');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ttstype')}return null}),"ttstype").appendField("音源");this.setInputsInline(false);this.setOutput(true,null);this.setColour(Blockly.Blocks.voiceera.HUE);this.setTooltip("合成成功返回音频文件名。合成失败返回-1。本拼图需要安装「语音时代」。\n自定义声源为「bin/VoiceDB」目录下的音源文件");this.setHelpUrl("")},mutationToDom:function(){var container=document.createElement('mutation');var isTTSC=this.getFieldValue('ttstype')=="outtts";container.setAttribute('ttstype',isTTSC);return container},domToMutation:function(xmlElement){var isTTSC=(xmlElement.getAttribute('ttstype')!='false');this.updateAt_(isTTSC)},updateAt_:function(isTTSC){this.removeInput('ttsgroup');if(isTTSC){this.setTooltip("合成成功返回音频文件名。合成失败返回-1。本拼图需要安装「语音时代」。\n自定义声源为「bin/VoiceDB」目录下的音源文件");this.appendValueInput("ttsgroup").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outtts"],["内置","intts"]],function(value){var newTTSC=(value=='outtts');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ttstype')}return null}),"ttstype").appendField("音源")}else{this.setTooltip("合成成功返回音频文件名。合成失败返回-1。本拼图需要安装「语音时代」。\n内置音源不需要「bin/VoiceDB」目录下含有音源文件");this.appendDummyInput("ttsgroup").setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outtts"],["内置","intts"]],function(value){var newTTSC=(value=='outtts');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ttstype')}return null}),"ttstype").appendField("音源").appendField(new Blockly.FieldDropdown([["度娘","百度语音"],["度丫丫","度丫丫"],["糖糖","糖糖"],["V家","VOCALTTS"]]),"tts")}}};Blockly.Blocks['ve_getos']={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage("media/voiceera.png",25,20,"*")).appendField("语音时代_词库交互");this.appendValueInput("content").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("交互内容");this.appendValueInput("osgroup").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outos"],["内置","inos"]],function(value){var newTTSC=(value=='outos');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ostype')}return null}),"ostype").appendField("词库");this.setInputsInline(false);this.setOutput(true,null);this.setColour(Blockly.Blocks.voiceera.HUE);this.setTooltip("交互成功返回交互内容。交互失败返回-1。本拼图需要安装「语音时代」。\n自定义词库为「bin/VoiceOS」目录下的词库文件");this.setHelpUrl("")},mutationToDom:function(){var container=document.createElement('mutation');var isTTSC=this.getFieldValue('ostype')=="outos";container.setAttribute('ostype',isTTSC);return container},domToMutation:function(xmlElement){var isTTSC=(xmlElement.getAttribute('ostype')!='false');this.updateAt_(isTTSC)},updateAt_:function(isTTSC){this.removeInput('osgroup');if(isTTSC){this.setTooltip("交互成功返回交互内容。交互失败返回-1。本拼图需要安装「语音时代」。\n自定义词库为「bin/VoiceOS」目录下的词库文件");this.appendValueInput("osgroup").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outos"],["内置","inos"]],function(value){var newTTSC=(value=='outos');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ostype')}return null}),"ostype").appendField("词库")}else{this.setTooltip("交互成功返回交互内容。交互失败返回-1。本拼图需要安装「语音时代」。\n内置词库不需要「bin/VoiceOS」目录下含有词库文件");this.appendDummyInput("osgroup").setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["自定义","outos"],["内置","inos"]],function(value){var newTTSC=(value=='outos');if(newTTSC!=isTTSC){var block=this.sourceBlock_;block.updateAt_(newTTSC);block.setFieldValue(value,'ostype')}return null}),"ostype").appendField("词库").appendField(new Blockly.FieldDropdown([["图灵机器人","图灵机器人"],["青云客","青云客"],["本地词库","本地词库"]]),"os")}}};